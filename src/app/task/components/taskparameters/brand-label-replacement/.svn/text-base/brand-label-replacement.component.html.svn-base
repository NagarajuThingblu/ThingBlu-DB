<div class="ui-g " [formGroup]="REBRAND" *ngIf="PageFlag.page =='AssignTask'">
  <!--Order No-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="orderno">{{ globalResource.orderno }}<span class="star">*</span>{{ globalResource.labelcolon }}
      </label>

      <p-dropdown [filter]="true" [options]="allQAOrders" defaultLabel="-- Select --" [(ngModel)]="TaskModel.REBRAND.orderno" (onChange)="onOrderChange()"
        formControlName="orderno" class="clsControl" id="orderno" name="orderno"
        [readonly]="readOnlyFlag"
        ></p-dropdown>

      <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
        *ngIf="!REBRAND.controls['orderno'].valid&&REBRAND.controls['orderno'].dirty">
        <i class="fa fa-close"></i>
        <span *ngIf="REBRAND.controls['orderno'].errors['required']">
          {{ globalResource.ordernorequired }}
        </span>
      </div>

    </div>
  </div>
  <!--End Order NO -->

  <!--Delivery Date-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="deliverydate">{{ globalResource.deliverydate }}</label>{{ globalResource.labelcolon }}

      <span class="lblText">
        {{ orderObject?.DeliveryDate | date:'MM/dd/yyyy' }}
      </span>

    </div>
  </div>
  <!--End Delivery Date-->

  <!-- Order Details -->
  <div class="ui-g" *ngIf="REBRAND.value.orderno&&(aOrderDetailsArr?.controls.length||bOrderDetailsArr?.controls.length||cOrderDetailsArr?.controls.length)">
    <div class="paddingRL">
      <h5>Order Details</h5>
      <div class="ui-g-12" formArrayName="aOrderDetailsArr" *ngIf="aOrderDetailsArr?.controls.length">
        <!-- A Bud Order Details -->
        <p-table [value]="aOrderDetailsArr?.controls">
          <ng-template pTemplate="caption">
            Bud Order Details
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width:15%">{{globalResource.brand}}</th>
              <th style="width:15%">{{globalResource.subbrand}}</th>
              <th style="width:15%">{{globalResource.strain}}</th>
              <th style="width:15%">{{globalResource.pkgtype}}</th>
              <th style="width:15%">{{globalResource.pkgsize}}</th>
              <!-- <th style="width:15%">{{globalResource.itemqty}}</th> -->
              <th style="width:15%">{{assignTaskResources.qafailed}}</th>
              <!-- <th style="width:15%">{{globalResource.brandlablerepcount}}</th> -->
              <th style="width:15%">{{assignTaskResources.qalabeledcount}}</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
            <tr [formGroupName]="i">
              <td>{{orderDetails?.value.brandName}}</td>
              <td>{{orderDetails?.value.subBrandName}}</td>
              <td>{{orderDetails?.value.strainName}}</td>
              <td>{{orderDetails?.value.pkgTypeName}}</td>
              <td>{{orderDetails?.value.unitValue}} {{globalResource.listgramunit}}</td>
              <!-- <td>{{orderDetails?.value.itemQty}}</td> -->
              <td>{{(orderDetails?.value.qty)}}</td>
              <!-- <td>
                <input type="number" pKeyFilter="pint" pInputText formControlName="assignQty" id="assignqty" name="assignqty" style="width:100%;"
                />
              </td> -->
              <td>
                  {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }}
                <a [routerLink]="" (click)="getAssignPkgInfo(orderDetails,'frmHTML')">
                    <span class="fa fa-plus-circle">
                    </span>
                </a>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colspan]="7">
                {{ globalResource.norecordsfound }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- End of A Bud Order Details -->
      </div>

      <div class="ui-g-12" formArrayName="bOrderDetailsArr" *ngIf="bOrderDetailsArr?.controls.length">
        <!-- B Joints Order Details -->
        <p-table [value]="bOrderDetailsArr?.controls">
          <ng-template pTemplate="caption">
            Joints Order Details
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width:15%">{{globalResource.brand}}</th>
              <th style="width:15%">{{globalResource.subbrand}}</th>
              <th style="width:15%">{{globalResource.strain}}</th>
              <th style="width:15%">{{globalResource.pkgtype}}</th>
              <th style="width:15%">{{globalResource.pkgsize}}</th>
              <th style="width:15%">{{globalResource.itemqty}}</th>
              <th style="width:15%">{{assignTaskResources.qafailed}}</th>
              <!-- <th style="width:15%">{{globalResource.brandlablerepcount}}</th> -->
              <th style="width:15%">{{assignTaskResources.qalabeledcount}}</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
            <tr [formGroupName]="i">
              <td>{{orderDetails?.value.brandName}}</td>
              <td>{{orderDetails?.value.subBrandName}}</td>
              <td>{{orderDetails?.value.strainName}}</td>
              <td>{{orderDetails?.value.pkgTypeName}}</td>
              <td>{{orderDetails?.value.unitValue}} {{globalResource.listgramunit}}</td>
              <td>{{orderDetails?.value.itemQty}}</td>
              <td>{{(orderDetails?.value.qty)}}</td>
              <!-- <td>
                <input type="number" pKeyFilter="pint" pInputText formControlName="assignQty" id="assignqty" name="assignqty" style="width:100%;"
                />
              </td> -->
              <td>
                  {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }}
                <a [routerLink]="" (click)="getAssignPkgInfo(orderDetails,'frmHTML')">
                    <span class="fa fa-plus-circle">
                    </span>
                </a>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colspan]="7">
                {{ globalResource.norecordsfound }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- End of A Bud Order Details -->
      </div>

      <div class="ui-g-12" formArrayName="cOrderDetailsArr" *ngIf="cOrderDetailsArr?.controls.length">
        <!-- C Oil Order Details -->
        <p-table [value]="cOrderDetailsArr?.controls">
          <ng-template pTemplate="caption">
            Oil Order Details
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th style="width:15%">{{globalResource.brand}}</th>
              <th style="width:15%">{{globalResource.subbrand}}</th>
              <th style="width:15%">{{globalResource.strain}}</th>
              <th style="width:15%">{{globalResource.pkgtype}}</th>
              <th style="width:15%">{{globalResource.pkgsize}}</th>
              <!-- <th style="width:15%">{{globalResource.itemqty}}</th> -->
              <th style="width:15%">{{assignTaskResources.qafailed}}</th>
              <!-- <th style="width:15%">{{globalResource.brandlablerepcount}}</th> -->
              <th style="width:15%">{{assignTaskResources.qalabeledcount}}</th>              
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
            <tr [formGroupName]="i">
              <td>{{orderDetails?.value.brandName}}</td>
              <td>{{orderDetails?.value.subBrandName}}</td>
              <td>{{orderDetails?.value.strainName}}</td>
              <td>{{orderDetails?.value.pkgTypeName}}</td>
              <td>{{orderDetails?.value.unitValue}} {{globalResource.listgramunit}}</td>
              <!-- <td>{{orderDetails?.value.itemQty}}</td> -->
              <td>{{(orderDetails?.value.qty)}}</td>
              <!-- <td>
                <input type="number" pKeyFilter="pint" pInputText formControlName="assignQty" id="assignqty" name="assignqty" style="width:100%;"
                />
              </td> -->
              <td>
                {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }}
                <a [routerLink]="" (click)="getAssignPkgInfo(orderDetails,'frmHTML')">
                    <span class="fa fa-plus-circle">
                    </span>
                </a>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colspan]="7">
                {{ globalResource.norecordsfound }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- End of C Oil Order Details -->
      </div>
    </div>
  </div>
  <!--End Order Details -->

  <!-- Assign Package Details -->
  <p-dialog 
  header="Package Details" 
  [(visible)]="showAssignPkgModal" 
  modal="modal" 
  [resizable]="true" 
  [responsive]="true" 
  [width]="750"
   [minWidth]="200"
>
  <form [formGroup]="pkgAssignForm" (ngSubmit)="submitPkgAssignDetails(pkgAssignForm)">               
      <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">                
          <div class="ui-g">
              <div class="ui-g">
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.brand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.brandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.subbrand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.subBrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{globalResource.strain  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.strainName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgtype  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.pkgTypeName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgsize  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.unitValue}} {{globalResource.listgramunit}}
                          </label>
                        </div>
                  </div>
                    <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{assignTaskResources.qafailed}}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.qty}} 
                          </label>
                        </div>
                  </div>
                        
      </div>
              <div class="paddingRL">               
                <div class="ui-g-12" formArrayName="pkgAssignArr">                                                      
                  <!-- Order Item Package Details -->
                  <p-table [value]="pkgAssignArr?.controls">
                    <ng-template pTemplate="caption">
                     Package Item Details
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th style="width:10%;">{{globalResource.srno}}</th>
                        <th style="width:20%;">{{globalResource.pkgcode}}</th>
                        <th style="width:205px;" *ngIf="selectedProductType?.skewKeyName!='OIL'" >{{globalResource.lotno}}</th>
                        <th style="width:15%;" *ngIf="selectedProductType?.skewKeyName=='OIL'" >{{globalResource.oilpkgcode}}</th>
                        <th style="width:10%;">{{globalResource.qafailcomment}}</th>
                        <th style="width:15%;">
                          <p-checkbox 
                            value="false"
                            (onChange)="selectAll()"
                            [(ngModel)]="chkSelectAll"                         
                            [ngModelOptions]="{standalone: true}"                            
                            label="{{globalResource.selectall}}"
                            binary="true"
                          ></p-checkbox>
                          <!-- (onChange)="ToggleSelection()" -->
                        </th>                 
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-pkgItemDetails let-i="rowIndex">
                      <tr [formGroupName]="i">
                        <td>{{ i + 1}}</td>
                        <td>{{pkgItemDetails?.value.packageCode}}</td>
                        <td *ngIf="selectedProductType?.skewKeyName!='OIL'">
                          <span *ngIf="!pkgItemDetails?.value.mixPkgId">
                              {{pkgItemDetails?.value.growerLotNo}}

                              <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                              <app-lot-comment
                                  [LotId]="pkgItemDetails?.value.lotId"
                                  [LotCommentsCount]="pkgItemDetails?.value.lotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                              ></app-lot-comment>

                              <app-lot-note-icon
                                [LotId]="pkgItemDetails?.value.lotId"                                                
                                (NoteIconClicked)="showLotNote($event)"
                              ></app-lot-note-icon>
                          </span>
                          <!-- Mix Pkg Lot Details -->
                          <ol *ngIf="pkgItemDetails?.value.mixPkgId && pkgItemDetails?.value.skewKeyName === 'BUD'">
                            <li *ngFor="let mixPkgDetails of GetMixLotDetails(pkgItemDetails, 1)">
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.LotUsedWt}}{{globalResource.listgramunit}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                    [LotId]="mixPkgDetails?.LotId"
                                    [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                    (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                          <!-- Mix Pkg Lot Details --> 
                           <!-- Mix Joints Pkg Lot Details -->
                           <ol *ngIf="pkgItemDetails?.value.mixPkgId && pkgItemDetails?.value.skewKeyName === 'JOINTS'">
                            <li *ngFor="let mixPkgDetails of getJointsMixLotDetails(pkgItemDetails, 1)">
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.JointsQty}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                    [LotId]="mixPkgDetails?.LotId"
                                    [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                    (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                        <!-- Mix Joints Pkg Lot Details -->
                        </td>
                        <td *ngIf="selectedProductType?.skewKeyName=='OIL'">
                          {{pkgItemDetails?.value.oilPkgCode}}
                        </td>
                        <td>
                            {{pkgItemDetails?.value.comment}}
                        </td>
                        <td>
                          <p-checkbox 
                            value="false"
                            [(ngModel)]="pkgItemDetails?.value.pkgSelected" 
                            (onChange)="checkIfAllSelected();"
                            label=""                                                    
                            formControlName="pkgSelected"
                            binary="true"
                          ></p-checkbox>
                        </td>                        
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td [attr.colspan]="4">
                          {{ globalResource.norecordsfound }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <!-- End of C Oil Order Details -->
                </div>
              </div>
            </div>
            <!--End Order Details -->
        </div>
    <p-footer>
        <!-- [disabled]="!completionForm.valid" -->
      <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
      <!-- [disabled]="!completionForm.valid" -->
      <button type="button" class="ui-button-secondary" pButton icon="fa-close" (click)="showAssignPkgModal=false" label="Cancel"></button>
    </p-footer>
</form>
</p-dialog>
  <!-- End Of Assign Package Details  -->

  <!--Employee-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="employee">{{ globalResource.employee }}<span class="star">*</span>{{ globalResource.labelcolon }}
      </label>

      <p-dropdown [filter]="true" [options]="employees" [(ngModel)]="TaskModel.REBRAND.employee" class="clsControl" formControlName="employee"
        id="employee" name="employee">
      </p-dropdown>

      <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
        *ngIf="!REBRAND.controls['employee'].valid&&REBRAND.controls['employee'].dirty">
        <i class="fa fa-close"></i>
        <span *ngIf="REBRAND.controls['employee'].errors['required']">
          {{ globalResource.employeerequired }}
        </span>
      </div>
    </div>
  </div>
  <!--End Employee-->

  <!--Estimated Start Date-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="estimatedstartdatetime">
        {{ globalResource.eststartdate }}<span class="star">*</span>{{ globalResource.labelcolon }}
      </label>
      <small class="smallTextRed" *ngIf="showPastDateLabel">({{ globalResource.pastdatetask }})
      </small>
      <p-calendar [(ngModel)]="TaskModel.REBRAND.startdate" [showIcon]="true" [defaultDate]="defaultDate" (onSelect)="estStartDate_Select()"
        (onInput)="estStartDate_Select()" formControlName="estimatedstartdate" class="clsControl" id="estimatedstartdate" name="estimatedstartdate">
      </p-calendar>
      <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
        *ngIf="!REBRAND.controls['estimatedstartdate'].valid&&REBRAND.controls['estimatedstartdate'].dirty">
        <i class="fa fa-close"></i>
        <span *ngIf="REBRAND.controls['estimatedstartdate'].errors['required']">
          {{ globalResource.startdaterequired }}
        </span>
      </div>

      <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
        *ngIf="REBRAND.hasError('invalidDate')">
        {{ globalResource.datecomparevalidation }}
      </div>
    </div>
  </div>
  <!--End Estimated Start Date-->

  <!--Priority-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="employee">{{ globalResource.priority }}</label>{{ globalResource.labelcolon }}

      <p-dropdown [options]="priorities" [(ngModel)]="TaskModel.REBRAND.priority" [autoWidth]="true" formControlName="priority"
        id="priority" class="clsControl" name="priority">
      </p-dropdown>
    </div>
  </div>
  <!--End Priority-->

  <!--Notify Manager/Employee-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label></label>
      <div class="clear"></div>

      <p-checkbox value="chkManagerCheck" label="{{ assignTaskResources.notifymanager }}" [(ngModel)]="TaskModel.REBRAND.notifymanager"
        formControlName="notifymanager" binary="true"></p-checkbox>

      <p-checkbox value="chkEmployeeCheck" label="{{ assignTaskResources.notifyemployee }}" [(ngModel)]="TaskModel.REBRAND.notifyemployee"
        formControlName="notifyemployee" binary="true"></p-checkbox>
    </div>
  </div>
  <!--End Notify Manager/Employee-->
  <!--Comment-->
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <label for="comment">{{ assignTaskResources.comment }}</label>{{ globalResource.labelcolon }}

      <textarea pInputTextarea [(ngModel)]="TaskModel.REBRAND.usercomment" formControlName="comment" placeholder="Enter Comment" id="comment" name="comment"
        class="clsControl" maxlength="500"></textarea>

        

      <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
        *ngIf="!REBRAND.controls['comment'].valid&&REBRAND.controls['comment'].dirty">
        <i class="fa fa-close"></i>
        <span *ngIf="REBRAND.controls['comment'].errors['maxLength']">
          {{ assignTaskResources.commentMaxLength }}
        </span>
      </div>
    </div>
  </div>
  <!--End Comment-->
</div>

<app-lot-note [Lot]="lotInfo" *ngIf="lotInfo?.showLotNoteModal" (NoteSaved)="OnNoteSave($event)" ></app-lot-note> 

<app-popup-lot-comment [Lot]="lotInfo" *ngIf="lotInfo?.showLotCommentModal" (CommentSaved)="OnCommentSaved($event)">
  </app-popup-lot-comment>

<!-- Action Details Page Plotting -->
<div *ngIf="PageFlag.page =='TaskAction'">
  <div class="ui-g">
    <!--Employee -->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.employee }}: </strong>
        </label>

        <label>
          {{TaskModel?.EmpName}}
        </label>
      </div>
    </div>
    <!--End Employee -->
    <!-- OrderRefId -->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>Order Id : </strong>
        </label>

        {{TaskModel?.OrderRefId}}
      </div>
    </div>
    <!--End OrderRefId -->
    <!-- RetailerName -->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>Retailer Name: </strong>
        </label>

        {{TaskModel?.RetailerName}}
      </div>
    </div>
    <!--End RetailerName -->
    <!--Delivery Date-->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>Delivery Date: </strong>
        </label>

        {{TaskModel?.DeliveryDate}}
      </div>
    </div>
    <!--End Delivery Date-->

    <!--Estimated Start DateTime-->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.eststartdate }}: </strong>
        </label>

        {{TaskModel?.EstStartDate }}
      </div>
    </div>
    <!--End Estimated Start DateTime-->

    <!--Actual Start DateTime-->
    <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus !== taskStatus.Assigned&&TaskModel?.TaskStatus !== ''">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.actualstartdate }}: </strong>
        </label>

        {{TaskModel?.ActStartDate }}
      </div>
    </div>
    <!--End Actual Start DateTime-->

    <!--Actual End DateTime-->
    <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus !== taskStatus.Assigned&&TaskModel?.TaskStatus !== ''">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.actualenddate }}: </strong>
        </label>

        {{TaskModel?.ActEndDate}}
      </div>
    </div>
    <!--End Actual End DateTime-->

    <!--Actual cost-->
    <div class="ui-g-12 ui-md-6" *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''">
      <div class="paddingRL">
        <label>
          <strong>{{ assignTaskResources.actualcost }}: </strong>
        </label>

        {{TaskModel?.EmpFinalCost | currency }}
      </div>
    </div>
    <!--End Actual costs-->

    <!--Priority -->
    <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.priority }}: </strong>
        </label>

        {{TaskModel?.TaskPriority}}
      </div>
    </div>
    <!--End Priority -->

    <!--Misc. Cost-->
    <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus === taskStatus.Completed">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.misccost }}: </strong>
        </label>

        {{taskReviewModel?.rmisccost | currency }}
      </div>
    </div>
    <!--End Misc. Cost-->

    <!-- Completion Comment -->
    <!-- <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus === taskStatus.Completed">
      <div class="paddingRL">
        <label>
          <strong>{{ globalResource.comment }}: </strong>
        </label>

        {{ TaskModel?.comment }}
      </div>
    </div> -->
    <!-- End Completion Comment -->

    <!-- Order Details -->
    <div class="ui-g">
        <div class="paddingRL">
          <!-- <h5>Order Details</h5> -->
          <div class="ui-g-12" *ngIf="qAOrderDetails?.aOrderDetails.length">
            <!-- A Bud Order Details -->
            <p-table [value]="qAOrderDetails?.aOrderDetails">
              <ng-template pTemplate="caption">
                Bud Order Details
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width:15%">{{globalResource.brand}}</th>
                  <th style="width:15%">{{globalResource.subbrand}}</th>
                  <th style="width:15%">{{globalResource.strain}}</th>
                  <th style="width:15%">{{globalResource.pkgtype}}</th>
                  <th style="width:15%">{{globalResource.pkgsize}}</th>
                  <!-- <th style="width:15%">{{globalResource.itemqty}}</th> -->
                  <!-- <th style="width:15%">{{globalResource.orderqty}}</th> -->
                  <th style="width:15%">{{globalResource.assignqty}}</th>
                  <th style="width:15%" *ngIf="showToManager">{{assignTaskResources.pkgslabeled}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                <tr >
                  <td>{{orderDetails?.BrandName}}</td>
                  <td>{{orderDetails?.SubBrandName}}</td>
                  <td>{{orderDetails?.StrainName}}</td>
                  <td>{{orderDetails?.PkgTypeName}}</td>
                  <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                  <!-- <td>{{orderDetails?.ItemQty}}</td> -->
                  <!-- <td>{{(orderDetails?.TotalWt)}}</td> -->
                  <td  pTooltip="Assigned Packages Details" tooltipPosition="left">  
                      <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'ASSIGN')" ><u>{{orderDetails?.AssignedQty}}</u></a>
                  </td>
                  <td *ngIf="showToManager" pTooltip="Labeled Packages Details" tooltipPosition="left">  
                      <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'LABEL')" ><u>{{orderDetails?.CompletedQty}}</u></a>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td [attr.colspan]="8">
                    {{ globalResource.norecordsfound }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
            <!-- End of A Bud Order Details -->
          </div>

          <div class="ui-g-12" *ngIf="qAOrderDetails?.bOrderDetails.length">
            <!-- B Joints Order Details -->
            <p-table [value]="qAOrderDetails?.bOrderDetails">
              <ng-template pTemplate="caption">
                Joints Order Details
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width:15%">{{globalResource.brand}}</th>
                  <th style="width:15%">{{globalResource.subbrand}}</th>
                  <th style="width:15%">{{globalResource.strain}}</th>
                  <th style="width:15%">{{globalResource.pkgtype}}</th>
                  <th style="width:15%">{{globalResource.pkgsize}}</th>
                  <th style="width:15%">{{globalResource.itemqty}}</th>
                  <!-- <th style="width:15%">{{globalResource.orderqty}}</th> -->
                  <th style="width:15%">{{globalResource.assignqty}}</th>
                  <th style="width:15%" *ngIf="showToManager">{{assignTaskResources.pkgslabeled}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                <tr>
                    <td>{{orderDetails?.BrandName}}</td>
                    <td>{{orderDetails?.SubBrandName}}</td>
                    <td>{{orderDetails?.StrainName}}</td>
                    <td>{{orderDetails?.PkgTypeName}}</td>
                    <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                    <td>{{orderDetails?.ItemQty}}</td>
                    <!-- <td>{{(orderDetails?.TotalWt)}}</td> -->
                    <td  pTooltip="Assigned Packages Details" tooltipPosition="left">  
                        <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'ASSIGN')" ><u>{{orderDetails?.AssignedQty}}</u></a>
                    </td>
                    <td *ngIf="showToManager" pTooltip="Labeled Packages Details" tooltipPosition="left">  
                        <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'LABEL')" ><u>{{orderDetails?.CompletedQty}}</u></a>
                    </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td [attr.colspan]="8">
                    {{ globalResource.norecordsfound }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
            <!-- End of A Bud Order Details -->
          </div>

          <div class="ui-g-12" *ngIf="qAOrderDetails?.cOrderDetails.length">
            <!-- C Oil Order Details -->
            <p-table [value]="qAOrderDetails?.cOrderDetails" >
              <ng-template pTemplate="caption">
                Oil Order Details
              </ng-template>
              <ng-template pTemplate="header">
                <tr>
                  <th style="width:15%">{{globalResource.brand}}</th>
                  <th style="width:15%">{{globalResource.subbrand}}</th>
                  <th style="width:15%">{{globalResource.strain}}</th>
                  <th style="width:15%">{{globalResource.pkgtype}}</th>
                  <th style="width:15%">{{globalResource.pkgsize}}</th>
                  <!-- <th style="width:15%">{{globalResource.itemqty}}</th> -->
                  <!-- <th style="width:15%">{{globalResource.orderqty}}</th> -->
                  <th style="width:15%">{{globalResource.assignqty}}</th>
                  <th style="width:15%" *ngIf="showToManager">{{assignTaskResources.pkgslabeled}}</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                <tr>
                    <td>{{orderDetails?.BrandName}}</td>
                    <td>{{orderDetails?.SubBrandName}}</td>
                    <td>{{orderDetails?.StrainName}}</td>
                    <td>{{orderDetails?.PkgTypeName}}</td>
                    <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                    <!-- <td>{{orderDetails?.ItemQty}}</td> -->
                    <!-- <td>{{(orderDetails?.TotalWt)}}</td> -->
                    <td  pTooltip="Assigned Packages Details" tooltipPosition="left">  
                        <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'ASSIGN')" ><u>{{orderDetails?.AssignedQty}}</u></a>
                    </td>
                    <td *ngIf="showToManager" pTooltip="Labeled Packages Details" tooltipPosition="left">  
                        <a [routerLink]="" (click)="getPkgsInfo(orderDetails, 'LABEL')" ><u>{{orderDetails?.CompletedQty}}</u></a>
                    </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td [attr.colspan]="7">
                    {{ globalResource.norecordsfound }}
                  </td>
                </tr>
              </ng-template>
            </p-table>
            <!-- End of C Oil Order Details -->
          </div>
        </div>
      </div>
      <!--End Order Details -->

      <!-- Product type Pkgs completion details -->

      <p-dialog header="Packages Details" [(visible)]="showProductTypePkgsDetailsModal" modal="modal" [resizable]="true" [responsive]="true" [width]="750" [minWidth]="200" >
          <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
              <div class="ui-g">
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.brand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.BrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.subbrand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.SubBrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{globalResource.strain  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.StrainName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgtype  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.PkgTypeName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgsize  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.UnitValue}} {{globalResource.listgramunit}}
                          </label>
                        </div>
                  </div>
                    <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{assignTaskResources.assignedqty}}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.AssignedQty}} 
                          </label>
                        </div>
                  </div>
                        
      </div>
            <p-table [value]="productTypePkgDetails">
                 
                <ng-template pTemplate="caption">
                          <h6>Pkgs Details</h6>
                  </ng-template>
                  <ng-template pTemplate="header">
                      <tr>
                          <th style="width:10%;">{{globalResource.srno}}</th>
                          <th style="width:20%;">{{globalResource.pkgcode}}</th>
                          <th style="width:205px;" *ngIf="selectedProductType?.SkewKeyName!='OIL'" >{{globalResource.lotno}}</th>
                          <th style="width:20%;" *ngIf="selectedProductType?.SkewKeyName=='OIL'" >{{globalResource.oilpkgcode}}</th>                        
                          <!-- <th *ngIf="selectedProductType?.Flag != 'ASSIGN'" >{{assignTaskResources.issuetype}}</th> -->
                          <th style="width:20%;">{{assignTaskResources.comment}}</th>                           
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-pkgItemDetails let-i="rowIndex">
                      <tr>
                        <td>{{ i + 1}}</td>
                        <td>{{pkgItemDetails?.PackageCode}}</td>
                        <td *ngIf="selectedProductType?.SkewKeyName!='OIL'">                         
                          <span *ngIf="!pkgItemDetails?.MixPkgId">
                              {{pkgItemDetails?.GrowerLotNo}}

                            <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                            <app-lot-comment
                              [LotId]="pkgItemDetails?.LotId"
                              [LotCommentsCount]="pkgItemDetails?.LotNoteCount"
                              (CommentIconClicked)="commentIconClicked($event)"
                            ></app-lot-comment>

                            <app-lot-note-icon
                              [LotId]="pkgItemDetails?.LotId"                                                
                              (NoteIconClicked)="showLotNote($event)"
                            ></app-lot-note-icon>
                          </span>
                          <!-- Mix Pkg Lot Details -->
                          <ol *ngIf="pkgItemDetails?.MixPkgId && pkgItemDetails?.SkewKeyName === 'BUD'">
                            <li *ngFor="let mixPkgDetails of GetMixLotDetails(pkgItemDetails, 0)">
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.LotUsedWt}}{{globalResource.listgramunit}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                  [LotId]="mixPkgDetails?.LotId"
                                  [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                          <!-- Mix Pkg Lot Details --> 
                          <!-- Mix Pkg joints Lot Details -->
                          <ol *ngIf="pkgItemDetails?.MixPkgId && pkgItemDetails?.SkewKeyName === 'JOINTS'">
                            <li *ngFor="let mixPkgDetails of getJointsMixLotDetails(pkgItemDetails, 0)">
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.JointsQty}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                  [LotId]="mixPkgDetails?.LotId"
                                  [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                          <!-- Mix Pkg joints Lot Details --> 
                        </td>
                        <td *ngIf="selectedProductType?.SkewKeyName=='OIL'">
                          {{pkgItemDetails?.OilPkgCode}}
                        </td>
                        <!-- <td *ngIf="selectedProductType?.Flag != 'ASSIGN'">{{pkgItemDetails?.QAFailReason}}</td> -->
                        <td>{{pkgItemDetails?.Comment}}</td>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="emptymessage">
                      <tr>
                          <td [attr.colspan]="5">
                              {{ globalResource.norecordsfound }}
                          </td>
                      </tr>
                  </ng-template>
              </p-table>               
            </div>
            <p-footer>            
                    <button type="button" pButton icon="fa-close" (click)="showProductTypePkgsDetailsModal=false" label="Cancel"></button>
                    <div class="clear"></div>
                </p-footer>
                <div class="clear"></div>
        </p-dialog>
  
      <!-- End Product type Pkgs completion details -->


<p-dialog
  header="Task Completion"
  [(visible)]="PageFlag.showmodal"
  modal="modal"
  [resizable]="true"
  [responsive]="true"
  [width]="750"
   [minWidth]="200"
>
  <form [formGroup]="completionForm" (ngSubmit)="submitCompleteParameter(completionForm.value)">
      <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
        <!-- Order Details -->
          <div class="ui-g">
              <div class="paddingRL">
                <h5>Order Details</h5>
                <div class="ui-g-6">
                    <p-dropdown
                      [options]="skewTypes"
                      [(ngModel)]="skewType"
                      [ngModelOptions]="{standalone: true}"                     
                      class="clsControl"
                      id="skewyypes" 
                      name="skewyypes">
                    </p-dropdown>
                </div>
                <div class="ui-g-12" *ngIf="qAOrderDetails?.aOrderDetails.length&&(skewType=='BUD'||skewType=='All')">
                  <!-- A Bud Order Details -->
                  <p-table [value]="qAOrderDetails?.aOrderDetails">
                    <ng-template pTemplate="caption">
                      Bud Order Details
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th>{{globalResource.brand}}</th>
                        <th>{{globalResource.subbrand}}</th>
                        <th>{{globalResource.strain}}</th>
                        <th>{{globalResource.pkgtype}}</th>
                        <th>{{globalResource.pkgsize}}</th>
                        <!-- <th>{{globalResource.itemqty}}</th> -->
                        <!-- <th>{{globalResource.orderqty}}</th> -->
                        <th>{{assignTaskResources.assignedqty}}</th>
                       
                        <th>
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                      <tr >
                        <td>{{orderDetails?.BrandName}}</td>
                        <td>{{orderDetails?.SubBrandName}}</td>
                        <td>{{orderDetails?.StrainName}}</td>
                        <td>{{orderDetails?.PkgTypeName}}</td>
                        <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                        <!-- <td>{{orderDetails?.ItemQty}}</td> -->
                        <td>{{(orderDetails?.AssignedQty)}}</td>
                        <td>
                            <!-- {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }} -->
                          <a [routerLink]="" (click)="getAssignedPkgInfo(orderDetails)">
                              <span class="fa fa-info-circle">
                              </span>
                          </a>
                        </td>
                        <!-- <td>{{orderDetails?.ItemQty}}</td> -->
                        <!-- <td>{{(orderDetails?.Qty)}}</td> -->
                        <!-- <td>{{(orderDetails?.AssignedQty)}}</td>      -->
                        <!-- <td>
                          <a [routerLink]="" (click)="getAssignedPkgInfo(orderDetails)">
                              <span class="fa fa-info-circle">
                              </span>
                          </a>
                        </td>-->
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td [attr.colspan]="8">
                          {{ globalResource.norecordsfound }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <!-- End of A Bud Order Details -->
                </div>

                <div class="ui-g-12" *ngIf="qAOrderDetails?.bOrderDetails.length&&(skewType=='JOINTS'||skewType=='All')">
                  <!-- B Joints Order Details -->
                  <p-table [value]="qAOrderDetails?.bOrderDetails">
                    <ng-template pTemplate="caption">
                      Joints Order Details
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th>{{globalResource.brand}}</th>
                        <th>{{globalResource.subbrand}}</th>
                        <th>{{globalResource.strain}}</th>
                        <th>{{globalResource.pkgtype}}</th>
                        <th>{{globalResource.pkgsize}}</th>
                        <th>{{globalResource.itemqty}}</th>
                        <!-- <th style="width:15%">{{globalResource.orderqty}}</th>  -->
                        <th>{{assignTaskResources.assignedqty}}</th>                       
                        <th></th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                      <tr>
                        <td>{{orderDetails?.BrandName}}</td>
                        <td>{{orderDetails?.SubBrandName}}</td>
                        <td>{{orderDetails?.StrainName}}</td>
                        <td>{{orderDetails?.PkgTypeName}}</td>
                        <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                        <td>{{orderDetails?.ItemQty}}</td>
                        <td>{{(orderDetails?.AssignedQty)}}</td>                        
                        <td>
                            <!-- {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }} -->
                          <a [routerLink]="" (click)="getAssignedPkgInfo(orderDetails)">
                              <span class="fa fa-info-circle">
                              </span>
                          </a>
                        </td> 
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td [attr.colspan]="8">
                          {{ globalResource.norecordsfound }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <!-- End of A Bud Order Details -->
                </div>

                <div class="ui-g-12" *ngIf="qAOrderDetails?.cOrderDetails.length&&(skewType=='OIL'||skewType=='All')">
                  <!-- C Oil Order Details -->
                  <p-table [value]="qAOrderDetails?.cOrderDetails">
                    <ng-template pTemplate="caption">
                      Oil Order Details
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th>{{globalResource.brand}}</th>
                        <th>{{globalResource.subbrand}}</th>
                        <th>{{globalResource.strain}}</th>
                        <th>{{globalResource.pkgtype}}</th>
                        <th>{{globalResource.pkgsize}}</th>
                        <!-- <th>{{globalResource.itemqty}}</th> -->
                        <!-- <th style="width:15%">{{globalResource.orderqty}}</th> -->                        
                        <th>{{assignTaskResources.assignedqty}}</th>                      
                        <th></th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-orderDetails let-i="rowIndex">
                      <tr>
                        <td>{{orderDetails?.BrandName}}</td>
                        <td>{{orderDetails?.SubBrandName}}</td>
                        <td>{{orderDetails?.StrainName}}</td>
                        <td>{{orderDetails?.PkgTypeName}}</td>
                        <td>{{orderDetails?.UnitValue}} {{globalResource.listgramunit}}</td>
                        <!-- <td>{{orderDetails?.ItemQty}}</td> -->
                        <!-- <td>{{(orderDetails?.Qty)}}</td> -->
                        <td>{{(orderDetails?.AssignedQty)}}</td>                          
                        <td>
                            <!-- {{ selectedPkgsMap[orderDetails.value.ProductTypeId]?.length }} -->
                          <a [routerLink]="" (click)="getAssignedPkgInfo(orderDetails)">
                              <span class="fa fa-info-circle">
                              </span>
                          </a>
                        </td>                    
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td [attr.colspan]="8">
                          {{ globalResource.norecordsfound }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <!-- End of C Oil Order Details -->
                </div>
              </div>
            </div>
            <!--End Order Details -->
            <div class="ui-grid-row">                 
                <div class="ui-grid-col-4 text-right">
                  {{ assignTaskResources.misccost }}:
                </div>
                <div class="ui-grid-col-5">
                    <input type="number"
                      OnlyNumber="true"
                      autocomplete="off"
                      pInputText                               
                      formControlName="MiscCost"
                      id="misccost"
                      name="misccost"      
                    />               
                </div>                
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-4 text-right">
                  {{ assignTaskResources.comment }}:
                </div>
                <div class="ui-grid-col-5">
                    <textarea
                      pInputTextarea
                      formControlName="MiscComment"
                      id="misccomment"
                      name="misccomment"
                      maxlength="500"
                      class="clsControl"
                    ></textarea>
                </div>
            </div>
        </div>
    <p-footer>
        <!-- [disabled]="!completionForm.valid" -->
      <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
      <!-- [disabled]="!completionForm.valid" -->
      <button type="button" class="ui-button-secondary" pButton icon="fa-close" (click)="PageFlag.showmodal=false" label="Cancel"></button>
    </p-footer>
</form>
</p-dialog>

<!-- QA Fail Item Check Uncheck Modal -->
<p-dialog
  header="Package Details"
  [(visible)]="showProductTypePkgDetailsModal"
  modal="modal"
  [resizable]="true"
  [responsive]="true"
  [width]="750"
   [minWidth]="200"
>
  <form [formGroup]="qaPkgItemDetailsForm" (ngSubmit)="submitQAPkgItemDetails(qaPkgItemDetailsForm)">
      <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
          <div class="ui-g">
              <div class="ui-g">
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.brand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.BrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.subbrand  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.SubBrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{globalResource.strain  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.StrainName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgtype  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.PkgTypeName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgsize  }}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.UnitValue}} {{globalResource.listgramunit}}
                          </label>
                        </div>
                  </div>
                    <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{assignTaskResources.assignedqty}}: </strong>
                          </label>
                          <label>
                              {{selectedProductType?.AssignedQty}} 
                          </label>
                        </div>
                  </div>
                        
      </div>
              <div class="paddingRL">
                <div class="ui-g-12" formArrayName="qaPkgItemArr">
                  <!-- Order Item Package Details -->
                  <p-table [value]="qaPkgItemArr?.controls">
                    <ng-template pTemplate="caption">
                     Package Item Details
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th style="width:10%;">{{globalResource.srno}}</th>
                        <th style="width:20%;">{{globalResource.pkgcode}}</th>
                        <th style="width:205px;" *ngIf="selectedProductType?.SkewKeyName!='OIL'" >{{globalResource.lotno}}</th>
                        <th style="width:20%;" *ngIf="selectedProductType?.SkewKeyName=='OIL'" >{{globalResource.oilpkgcode}}</th>
                        <th style="width:10%;">{{assignTaskResources.islabeled}}</th>
                        <!-- <th>{{assignTaskResources.issuetype}}</th>
                        <th>{{assignTaskResources.comment}}</th> -->
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-pkgItemDetails let-i="rowIndex">
                      <tr [formGroupName]="i">
                        <td>{{ i + 1}}</td>
                        <td>{{pkgItemDetails?.value.packageCode}}</td>
                        <td *ngIf="selectedProductType?.SkewKeyName!='OIL'">                        
                          <span *ngIf="!pkgItemDetails?.value.mixPkgId">
                              {{pkgItemDetails?.value.growerLotNo}}

                              <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                              <app-lot-comment
                                [LotId]="pkgItemDetails?.value.lotId"
                                [LotCommentsCount]="pkgItemDetails?.value.lotNoteCount"
                                (CommentIconClicked)="commentIconClicked($event)"
                              ></app-lot-comment>

                              <app-lot-note-icon
                                [LotId]="pkgItemDetails?.value.lotId"                                                
                                (NoteIconClicked)="showLotNote($event)"
                              ></app-lot-note-icon>
                          </span>
                          <!-- Mix Pkg Lot Details -->
                          <ol *ngIf="pkgItemDetails?.value.mixPkgId && pkgItemDetails?.value.skewKeyName == 'BUD'">
                            <li *ngFor="let mixPkgDetails of GetMixLotDetails(pkgItemDetails, 2)">
                        
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.LotUsedWt}}{{globalResource.listgramunit}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                  [LotId]="mixPkgDetails?.LotId"
                                  [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                          <!-- Mix Pkg Lot Details --> 
                           <!-- Mix Joints Pkg Lot Details -->
                           <ol *ngIf="pkgItemDetails?.value.mixPkgId && pkgItemDetails?.value.skewKeyName == 'JOINTS'">
                            <li *ngFor="let mixPkgDetails of getJointsMixLotDetails(pkgItemDetails, 2)">
                                {{mixPkgDetails?.GrowerLotNo }} ({{mixPkgDetails?.JointsQty}})

                                <!-- Added by Devdan :: 20-Nov-2018 :: Adding Comnent popup -->
                                <app-lot-comment
                                  [LotId]="mixPkgDetails?.LotId"
                                  [LotCommentsCount]="mixPkgDetails?.LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="mixPkgDetails?.LotId"                                                
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
                            </li>                      
                          </ol>  
                          <!-- Mix Joints Pkg Lot Details -->
                        </td>
                        <td *ngIf="selectedProductType?.SkewKeyName=='OIL'">
                          {{pkgItemDetails?.value.oilPkgCode}}
                        </td>
                        <td>
                          <p-checkbox
                            value="false"
                            label=""                            
                            formControlName="isPkgLabeled"
                            binary="true"
                          ></p-checkbox>
                        </td>
                        <!-- <td>
                          <p-dropdown
                            [filter]="true"
                            [options]="qAFailReasons"
                            class="clsControl"
                            formControlName="issueType"
                            id="issuetype" name="issuetype">
                          </p-dropdown>
                        </td>
                        <td>
                          <textarea
                            pInputTextarea
                            formControlName="comment"
                            id="comment"
                            name="comment"
                            maxlength="500"
                            class="clsControl"
                          ></textarea>
                        </td> -->
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td [attr.colspan]="5">
                          {{ globalResource.norecordsfound }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <!-- End of C Oil Order Details -->
                </div>
              </div>
            </div>
            <!--End Order Details -->
        </div>
    <p-footer>
        <!-- [disabled]="!completionForm.valid" -->
      <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
      <!-- [disabled]="!completionForm.valid" -->
      <button type="button" class="ui-button-secondary" pButton icon="fa-close" (click)="showProductTypePkgDetailsModal=false" label="Cancel"></button>
    </p-footer>
</form>
</p-dialog>
<!-- END of QA Item Check Uncheck Modal -->

  </div>
</div>
