<div class="ui-g " [formGroup]="BUDPACKAGING" *ngIf="PageFlag.page =='AssignTask'">
    <!--Order No-->
    <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label for="orderno">{{ globalResource.orderno }}<span class="star">*</span></label>:

          <p-dropdown
          [filter] ="true"
            [options]="allOrderNos"
            [(ngModel)]="TaskModel.BUDPACKAGING.orderno"
            defaultLabel="-- Select --"
            (onChange)="onOrderChange('fmrHTML')"
            formControlName="orderno"
            class="clsControl"
            id="orderno"
            name="orderno"
            [readonly]="readOnlyFlag"
          ></p-dropdown>

          <div
            class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
            *ngIf="!BUDPACKAGING.controls['orderno'].valid&&BUDPACKAGING.controls['orderno'].dirty">
              <span *ngIf="BUDPACKAGING.controls['orderno'].errors['required']">
                {{ globalResource.ordernorequired }}
              </span>
          </div>

        </div>
      </div>
      <!--End Order NO -->

      <!--Delivery Date-->
      <div class="ui-g-12 ui-md-6">
          <div class="paddingRL">
          <label for="deliverydate">{{ globalResource.deliverydate }}</label>:    

          <span class="lblText">
              {{ orderObject?.DeliveryDate | date:'MM/dd/yyyy' }}
          </span>

        </div>
    </div>
    <!--End Delivery Date-->

      <!-- Order Details -->
      <div class="ui-g-12" *ngIf="TaskModel.BUDPACKAGING.orderno" formArrayName="budOrderPackets">
        <h5>Order Details</h5>
        <p-table [value]="budOrderPackets?.controls" id="tblPkgQtyDetails" name="tblPkgQtyDetails">
            <ng-template pTemplate="header">
                <tr>
                    <th *ngIf="taskCategory != 'GROWING'" style="width:15%">{{globalResource.brand}}</th>
                    <th *ngIf="taskCategory != 'GROWING'" style="width:15%">{{globalResource.subbrand}}</th>
                    <th >{{globalResource.strain}}</th>
                    <th *ngIf="taskCategory === 'GROWING'">SkewName</th>
                    <th>{{globalResource.pkgtype}}</th>
                    <th >{{globalResource.pkgsize}}</th>
                    <!-- <th style="width:15%">{{globalResource.itemqty}}</th> -->
                    <th >{{globalResource.orderqty}}</th>
                    <th >{{globalResource.requirewt}}</th>
                    <!-- <th style="width:15%">{{globalResource.assignqty}}</th> -->
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-budOrderPacket let-i="rowIndex" >
                <tr [formGroupName]="i">
                    <td *ngIf="taskCategory != 'GROWING'">{{orderDetails[i].BrandName}}</td>
                    <td *ngIf="taskCategory != 'GROWING'">{{orderDetails[i].SubBrandName}}</td>
                    <td *ngIf="taskCategory === 'GROWING'">{{orderDetails[i].StrainName}}</td>
                    <td>{{orderDetails[i].SkewKeyName}}</td>
                    <td>{{orderDetails[i].PkgTypeName}}</td>
                    <td *ngIf="taskCategory != 'GROWING'">{{orderDetails[i].UnitValue}} {{globalResource.listgramunit}}</td>
                    <td *ngIf="taskCategory === 'GROWING'">{{orderDetails[i].UnitValue}} (lb)</td>
                    <!-- <td>{{orderDetails[i].ItemQty}}</td> -->
                    <td>{{orderDetails[i].RequiredQty}}</td>
                    <td>{{(orderDetails[i].TotalWt)}}</td>
                    <!-- <td>
                      <input
                        type="number"                                               
                        pKeyFilter="pint"                     
                        pInputText
                        autocomplete="off"                    
                        formControlName="assignPackageWt"
                        id="answer"
                        name="answer" 
                        style="width:100%;"
                      /> -->
                      <!-- (change)="assignWtOnChange(budOrderPacket)" -->
                    <!-- </td> -->
                </tr>
            </ng-template>
            <ng-template *ngIf="taskCategory != 'GROWING'" pTemplate="emptymessage" let-columns>
              <tr>
                  <td [attr.colspan]="9">
                     {{ globalResource.norecordsfound }}
                  </td>
              </tr>
            </ng-template>
        </p-table>

        <!-- <div class="text-right">
          <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
        </div> -->
      </div>
      <!--End Order Details -->

      <!-- Allocate multiple employee for bud packaging task -->
      <!-- {{ globalData.orderDetail | json  }} -->
      <app-bud-pkg-allocate-employee 
        *ngIf="TaskModel.BUDPACKAGING.orderno&&globalData.orderDetails?.Table?.length"
        [AllocateEmpData]="globalData"
        [BudPkgForm]="BUDPACKAGING"
      ></app-bud-pkg-allocate-employee>
      <!-- <app-bud-pkg-allocate-employee 
      *ngIf="TaskModel.BUDPACKAGING.orderno&&globalData.orderDetails?.Tablelength&&taskCategory === 'GROWING'"
      [AllocateEmpData]="globalData"
      [BudPkgForm]="BUDPACKAGING"
    ></app-bud-pkg-allocate-employee> -->

      <!--Employee-->
      <!-- <div class="ui-g-12 ui-md-6">
          <div class="paddingRL">
            <label for="employee">{{ globalResource.employee }}<span class="star">*</span></label>:

              <p-dropdown
              [filter] ="true"
                [options]="employees"
                [(ngModel)]="TaskModel.BUDPACKAGING.employee"
                class="clsControl"
                formControlName="employee"
                id="employee"
                name="employee">
            </p-dropdown>

            <div
              class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
              *ngIf="!BUDPACKAGING.controls['employee'].valid&&BUDPACKAGING.controls['employee'].dirty">
                <span *ngIf="BUDPACKAGING.controls['employee'].errors['required']">
                  {{ globalResource.employeerequired }}
                </span>
            </div>
          </div>
      </div> -->
      <!--End Employee-->

    <!--Estimated Start Date-->
    <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label for="estimatedstartdatetime">
            {{ globalResource.eststartdate }}<span class="star">*</span>:
          </label>
          <small class="smallTextRed"
            *ngIf="showPastDateLabel"
            >({{ globalResource.pastdatetask }})
          </small>
            <p-calendar
              [(ngModel)]="TaskModel.BUDPACKAGING.startdate"
              [showIcon]="true"
              [defaultDate]="defaultDate"
              (onSelect)="estStartDate_Select()"
              (onInput)="estStartDate_Select()"
              formControlName="estimatedstartdate"
              class="clsControl"
              id="estimatedstartdate"
              name="estimatedstartdate"
           >
         </p-calendar>
            <div
              class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
              *ngIf="!BUDPACKAGING.controls['estimatedstartdate'].valid&&BUDPACKAGING.controls['estimatedstartdate'].dirty">
                <span *ngIf="BUDPACKAGING.controls['estimatedstartdate'].errors['required']">
                  {{ globalResource.startdaterequired }}
                </span>
            </div>

            <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
              *ngIf="BUDPACKAGING.hasError('invalidDate')" >
                {{ globalResource.datecomparevalidation }}
            </div>
        </div>
    </div>
    <!--End Estimated Start Date-->

     <!--Priority-->
     <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
        <label for="employee">{{ globalResource.priority }}</label>:

        <p-dropdown
          [options]="priorities"
          [(ngModel)]="TaskModel.BUDPACKAGING.priority"
          [autoWidth]="true"
          formControlName="priority"
          id="priority"
          class="clsControl"
          name="priority">
        </p-dropdown>
      </div>
    </div>
    <!--End Priority-->

    <!--Notify Manager/Employee-->
    <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
            <label ></label>
          <div class="clear"></div>

            <p-checkbox
              value="chkManagerCheck"
              label="{{ assignTaskResources.notifymanager }}"
              [(ngModel)]="TaskModel.BUDPACKAGING.notifymanager"
              formControlName="notifymanager"
              binary="true"
            ></p-checkbox>

            <p-checkbox
              value="chkEmployeeCheck"
              label="{{ assignTaskResources.notifyemployee }}"
              [(ngModel)]="TaskModel.BUDPACKAGING.notifyemployee"
              formControlName="notifyemployee"
              binary="true"
            ></p-checkbox>
        </div>
    </div>
    <!--End Notify Manager/Employee-->
    <!--Comment-->
    <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label for="comment">{{ assignTaskResources.comment }}</label>:

            <textarea
              pInputTextarea
              [(ngModel)]="TaskModel.BUDPACKAGING.usercomment"
              formControlName="comment"
              id="comment"
              name="comment"
              class="clsControl"
              maxlength="500"
            ></textarea>

            <div
              class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
              *ngIf="!BUDPACKAGING.controls['comment'].valid&&BUDPACKAGING.controls['comment'].dirty">
                <span *ngIf="BUDPACKAGING.controls['comment'].errors['maxLength']">
                  {{ assignTaskResources.commentMaxLength }}
                </span>
          </div>
        </div>

        <p-dialog header="Select Lots"
          [(visible)]="showLotSelectionModel"
          modal="modal"
          [resizable]="true"
          [responsive]="true" [width]="600" [minWidth]="300" [blockScroll]="true" >

            <form [formGroup]="questionForm" (ngSubmit)="submit(questionForm)" formSubmit >
                <!-- (ngSubmit)="submit(questionForm)" -->
          <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">

            <div class="ui-g">

                    <!-- <div class="ui-g-12 ui-md-4">
                      <label>
                        <strong>Brand</strong>
                      </label>

                      <label>
                        {{selLotBrandStrainRow?.BrandName }}
                      </label>
                    </div> -->
                    <div class="ui-g-12 ui-md-6">
                      <label>
                          <strong>Genetics:</strong>
                        </label>

                        <label>
                          {{ selLotBrandStrainRow?.GeneticsName }}
                        </label>
                    </div>
                    <!-- <div class="ui-g-12 ui-md-4">
                        <label>
                          <strong>Strain</strong>
                        </label>

                        <label>
                          {{ selLotBrandStrainRow?.StrainName }}
                        </label>
                      </div> -->

                      <div class="ui-g-12 ui-md-6">
                          <label>
                            <strong>Required Weight:</strong>
                          </label>

                          <label>
                            {{ selLotBrandStrainRow?.combinationTotalAssignedWt }} {{globalResource.measure}}
                          </label>
                        </div>

              </div>
              <div formArrayName="questions">
              <p-table [value]="questions?.controls" id="tblLotSelection">
                  <ng-template pTemplate="header">
                      <tr>
                          <th style="width:150px">Strain</th>
                          <th style="width:170px" *ngIf="taskCategory != 'GROWING'">Lot No</th>
                          <th style="width:170px" *ngIf="taskCategory === 'GROWING'">Bin No</th>
                          <th style="width:33.33333333%">Available Weight</th>
                          <th style="width:33.33333333%">Selected Weight</th>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-question let-i="rowIndex" >
                      <tr [formGroupName]="i">
                          <td style="width: 150px"> {{ brandStrainLots[i].StrainName  }}</td>
                          <td style="width: 170px">
                              <p-checkbox
                                label="{{ brandStrainLots[i].GrowerLotNo  }}"
                                formControlName="question"
                                (ngModelChange)="changeValidator($event, i)"
                                binary="true"
                              ></p-checkbox>

                              <app-lot-comment
                                  [LotId]="question.value.LotNo"
                                  [LotCommentsCount]="brandStrainLots[i].LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                              ></app-lot-comment>

                              <app-lot-note-icon
                                [LotId]="question.value.LotNo"                                
                                (NoteIconClicked)="showLotNote($event)"
                              ></app-lot-note-icon>
                                                      
                          </td>
                          <!-- <td> {{ brandStrainLots[i].AvailableWt  }} {{globalResource.listgramunit}}</td> -->
                          <td>
                            <ng-container *ngIf="taskId && taskId > 0">
                              {{ question.value.AvailWt  }} {{globalResource.listgramunit}}
                            </ng-container>
                            <ng-container *ngIf="!taskId">
                              {{ brandStrainLots[i].AvailableWt }} {{globalResource.listgramunit}}
                            </ng-container>
                          </td>
                          <td>
                            <input
                              type="number"
                              OnlyNumber="true"
                              pInputText
                              autocomplete="off"
                              formControlName="answer"
                              id="answer"
                              name="answer"
                              style="width:100%;"
                          />                          
                          <div
                              class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                              *ngIf="!question.controls['answer'].valid&&question.controls['answer'].dirty">
                                <span *ngIf="question.controls['answer'].errors['max'] || question.controls['answer'].errors['min']">
                                  Select Valid Weight
                                </span>  
                                <span *ngIf="question.controls['answer'].errors['required']">
                                  Required
                                </span>
                                <!-- <span *ngIf="question.controls['answer'].hasError('lotmaxwtexceeded')">
                                 max lot wt exceeded
                                </span> -->
                          </div>
                        </td>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="3">
                          {{ assignTaskResources.nolotpresent }} "{{ selLotBrandStrainRow?.StrainName }}".
                        </td>
                    </tr>
                  </ng-template>
              </p-table>
              </div>
              <!-- do not delete below commented code -->
                <!-- <div formArrayName="questions">
                  <div *ngFor="let question of questions?.controls; let i = index;" [formGroupName]="i">
                    {{questionForm.get('questions.' + i + '.questionNumber').value}}
                     {{questions[questionForm.get('questions.' + i + '.questionNumber').value - 1]['EN']}}
                    <p-checkbox
                      label="{{ brandStrainLots[i].GrowerLotNo  }}"
                      formControlName="question"
                      (ngModelChange)="changeValidator($event, i)"
                      binary="true"
                    ></p-checkbox>
                    {{ brandStrainLots[i].AvailableWt  }}
                    <input type="checkbox" formControlName="question" (ngModelChange)="changeValidator($event, i)"/>
                    <input type="text" formControlName="answer" />

                    <input
                      type="text"
                      OnlyNumber="true"
                      pInputText
                      formControlName="answer"
                      id="answer"
                      name="answer"
                      style="width:30%;"
                    />
                    <em *ngIf="questionForm.get('questions.' + i + '.answer').invalid">Minimum length 4</em>
                  </div>
                </div>   -->

              <!-- {{brandStrainLots?[0] | json }} -->

              <!-- {{ lotSelectionForm.value | json }} -->
            </div>
            <p-footer class="text-right">

              <button type="submit"  pButton icon="fa-check"  label="Confirm" id="btnLotSelectionConfirm" name="btnLotSelectionConfirm" ></button>
              <!-- [disabled]="questionForm.invalid" -->
              <button type="button" pButton icon="fa-close" (click)="showLotSelectionModel=false" label="Cancel"></button>
          </p-footer>
        </form>
        </p-dialog>
    </div>
    <!--End Comment-->

    <!-- <div class="ui-g-12 ui-md-12 marginTop-15" style="text-align:right;" >
        <button pButton type="button" (click)="btnAllocateEmpClick()" label="Allocate Employees" ></button>
        
        <button pButton 
          type="button"  
          label="Clear" 
          class="ui-button-secondary" 
          (ResetForm)="resetForm()" 
        ></button>
    </div> -->

</div>

<app-lot-note [Lot]="lotInfo" *ngIf="lotInfo?.showLotNoteModal" (NoteSaved)="onNoteSave($event)" ></app-lot-note> 

<app-popup-lot-comment [Lot]="lotInfo" *ngIf="lotInfo?.showLotCommentModal" (CommentSaved)="OnCommentSaved($event)">
</app-popup-lot-comment>

<div *ngIf="PageFlag.page =='TaskAction'">
      <div class="ui-g">
        <!--Employee -->
     <div class="ui-g-12 ui-md-6">
      <div class="paddingRL">
          <label>
            <strong>{{ globalResource.employee }}: </strong>
          </label>

          <label>
            {{TaskModel?.EmpName}}
          </label>
        </div>
      </div>
      <!--End Employee -->
      <!--OrderRefId -->
      <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label>
            <strong>Order Id: </strong>
          </label>

            {{TaskModel?.OrderRefId}}
        </div>
      </div>
      <!--End OrderRefId -->
      <!-- RetailerName -->
      <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label>
            <strong *ngIf="taskCategory != 'GROWING'">Retailer Name: </strong>
            <strong *ngIf="taskCategory === 'GROWING'">Customer Name: </strong>
          </label>
  
            {{TaskModel?.RetailerName}}
        </div>
      </div>
      <!--End RetailerName -->
      <!--Brand-->
      <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
          <label>
            <strong>Delivery Date: </strong>
          </label>

            {{TaskModel?.DeliveryDate}}
        </div>
      </div>
      <!--End Brand-->

      <!--Estimated Start DateTime-->
      <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
            <label>
              <strong>{{ globalResource.eststartdate }}: </strong>
            </label>

              {{TaskModel?.EstStartDate }}
          </div>
        </div>
        <!--End Estimated Start DateTime-->

       <!--Actual Start DateTime-->
       <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus !== taskStatus.Assigned&&TaskModel?.TaskStatus !== ''" >
          <div class="paddingRL">
              <label>
                <strong>{{ globalResource.actualstartdate }}: </strong>
              </label>

                {{TaskModel?.ActStartDate }}
            </div>
          </div>
          <!--End Actual Start DateTime-->

        <!--Actual End DateTime-->
        <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus !== taskStatus.Assigned&&TaskModel?.TaskStatus !== ''">
          <div class="paddingRL">
            <label>
              <strong>{{ globalResource.actualenddate }}: </strong>
            </label>

              {{TaskModel?.ActEndDate}}
          </div>
        </div>
        <!--End Actual End DateTime-->

       <!--Actual cost-->
       <div class="ui-g-12 ui-md-6" *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''">
          <div class="paddingRL">
              <label>
                <strong>{{ assignTaskResources.actualcost }}: </strong>
              </label>
           
                {{TaskModel?.EmpFinalCost | currency }}
            </div>
          </div>
        <!--End Actual costs-->

      <!--Priority -->
      <div class="ui-g-12 ui-md-6">
        <div class="paddingRL">
            <label>
              <strong>{{ globalResource.priority }}: </strong>
            </label>

            {{TaskModel?.TaskPriority}}
          </div>
        </div>
        <!--End Priority -->

       <!--Misc. Cost-->
       <div class="ui-g-12 ui-md-6" *ngIf="TaskModel?.TaskStatus === taskStatus.Completed" >
          <div class="paddingRL">
              <label>
                <strong>{{ globalResource.misccost }}: </strong>
              </label>

                <!-- {{taskReviewModel?.rmisccost | currency }} -->
                {{TaskModel?.MiscCost | currency }}
                
            </div>
          </div>
          <!--End Misc. Cost-->
          <div class="ui-g-12" >
            <h5>Order Details</h5>
            <p-table [value]="TaskModel?.AssignQtyDetails" id="tblPkgQtyDetails1" name="tblPkgQtyDetails1">
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngIf="taskCategory != 'GROWING'" style="width:20%">{{globalResource.brand}}</th>
                        <th *ngIf="taskCategory != 'GROWING'" style="width:20%">{{globalResource.subbrand}}</th>
                        <th style="width:20%">{{globalResource.strain}}</th>
                        <th style="width:20%">{{globalResource.pkgtype}}</th>
                        <th style="width:20%">{{globalResource.pkgsize}}</th>
                        <!-- <th style="width:20%">{{globalResource.itemqty}}</th> -->
                        <!-- <th style="width:20%">Order Qty</th> -->
                        <th *ngIf="taskCategory != 'GROWING'" style="width:20%">{{globalResource.assignqty}}</th>
                        <th *ngIf="taskCategory === 'GROWING'" style="width:20%">Assign Wt</th>
                        <th style="width:20%" *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''&&taskCategory != 'GROWING'">
                          {{globalResource.completedqty}}
                        </th>
                        <th style="width:20%" *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''&&taskCategory === 'GROWING'">
                          Completed Wt
                        </th>
                        <th *ngIf="taskCategory != 'GROWING'&&showToManager" style="width:20%" >{{globalResource.revqty}}</th>
                        <th *ngIf="taskCategory === 'GROWING'&&showToManager"style="width:20%">Review Wt</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-details let-i="rowIndex" >
                    <tr >
                        <td *ngIf="taskCategory != 'GROWING'">{{details.BrandName}}</td>
                        <td *ngIf="taskCategory != 'GROWING'">{{details.SubBrandName}}</td>
                        <td>{{details.StrainName}}</td>
                        <td>{{details.PkgTypeName}}</td>
                        <td *ngIf="taskCategory != 'GROWING'">{{details.UnitValue}} {{globalResource.listgramunit}}</td>
                        <td *ngIf="taskCategory === 'GROWING'">{{details.PackageSize}} (lb)</td>
                        <!-- <td>{{details.ItemQty}}</td> -->
                        <td *ngIf="taskCategory != 'GROWING'">{{details.AssignedQty}}</td>
                        <td *ngIf="taskCategory === 'GROWING'">{{details.AssignedWt}}</td>                                                
                        <td 
                          pTooltip="View Completion Details" tooltipPosition="left"
                          *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''&&taskCategory != 'GROWING'">  
                          <a *ngIf="details.CompletedQty > 0" [routerLink]="" (click)="getLotsInfo(details?.ProductTypeId)" >
                              <u>{{(details.CompletedQty)}}</u>
                          </a>
                          <span *ngIf="details.CompletedQty === 0">
                              {{(details.CompletedQty)}}
                          </span>
                        </td>  
                        <td 
                        pTooltip="View Completion Details" tooltipPosition="left"
                        *ngIf="(TaskModel?.TaskStatus === taskStatus.Completed||TaskModel?.TaskStatus === taskStatus.ReviewPending)&&TaskModel?.TaskStatus !== ''&&taskCategory === 'GROWING'">  
                        <a *ngIf="details.CompletedWt > 0" [routerLink]="" (click)="getLotsInfo(details?.ProductTypeId)" >
                            <u>{{(details.CompletedWt)}}</u>
                        </a>
                        <span *ngIf="details.CompletedWt === 0">
                            {{(details.CompletedWt)}}
                        </span>
                      </td>                   
                        <td *ngIf="showToManager&&taskCategory != 'GROWING'" pTooltip="View Review Details" tooltipPosition="left">  
                          <a *ngIf="details.RevQty" [routerLink]="" (click)="getLotsInfo(details?.ProductTypeId)" >
                            <u>{{(details.RevQty)}}</u>
                          </a>
                          <span *ngIf="details.RevQty === 0">
                              {{(details.CompletedQty)}}
                          </span>
                        </td>   
                        <td *ngIf="showToManager&&taskCategory === 'GROWING'" pTooltip="View Review Details" tooltipPosition="left">  
                          <a *ngIf="details.RevCompletedWt" [routerLink]="" (click)="getLotsInfo(details?.ProductTypeId)" >
                            <u>{{(details.RevCompletedWt)}}</u>
                          </a>
                          <span *ngIf="details.RevCompletedWt === 0">
                              {{(details.CompletedWt)}}
                          </span>
                        </td>                                                      
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                  <tr>
                      <td [attr.colspan]="showToManager? 7 : 8">
                        {{ globalResource.norecordsfound }}
                      </td>
                  </tr>
                </ng-template>
            </p-table>
          </div>

          <!-- Product type lot completion and review details -->

          <p-dialog header="{{globalResource.pkgdetails}}" [(visible)]="showProductTypeLotDetailsModal" modal="modal" [resizable]="true" [responsive]="true" [width]="750" [minWidth]="200" >
              <div class="ui-g">
                  <div *ngIf="taskCategory != 'GROWING'" class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.brand  }}: </strong>
                          </label>
                          <label>
                              {{LotDetails?.BrandName}}
                          </label>
                        </div>
                  </div>
                  <div *ngIf="taskCategory != 'GROWING'" class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.subbrand  }}: </strong>
                          </label>
                          <label>
                              {{LotDetails?.SubBrandName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{globalResource.strain  }}: </strong>
                          </label>
                          <label>
                              {{LotDetails?.StrainName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgtype  }}: </strong>
                          </label>
                          <label>
                              {{LotDetails?.PkgTypeName}}
                          </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong>{{ globalResource.pkgsize  }}: </strong>
                          </label>
                          <label *ngIf="taskCategory != 'GROWING'">
                              {{LotDetails?.UnitValue}}{{globalResource.listgramunit}}
                          </label>
                          <label *ngIf="taskCategory === 'GROWING'">
                            {{LotDetails?.PackageSize}}(lb)
                        </label>
                        </div>
                  </div>
                  <div class="ui-g-12 ui-md-4">
                      <div class="paddingRL">
                          <label>
                            <strong *ngIf="taskCategory != 'GROWING'">{{ globalResource.assignqty  }}: </strong>
                            <strong *ngIf="taskCategory === 'GROWING'">Assign Wt: </strong>
                          </label>
                          <label *ngIf="taskCategory != 'GROWING'">
                              {{LotDetails?.AssignedQty}}  
                          </label>
                          <label *ngIf="taskCategory === 'GROWING'">
                            {{LotDetails?.AssignedWt}}  
                        </label>
                        </div>
                  </div>
      </div>
  
            <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 2px 0px">                  
                <p-table [value]="productTypeLotDetails" id="productTypeLotDetails" name="productTypeLotDetails">
                      <ng-template pTemplate="caption">
                              <h6>{{globalResource.pkgdetails}}</h6>
                             
                      </ng-template>
                      <ng-template pTemplate="header">
                          <tr>
                              <th style="width:10%;"> {{ globalResource.srno }} </th>
                              <!-- <th> {{globalResource.pkgcode }} </th> -->
                              <th *ngIf="taskCategory != 'GROWING'" style="width:20%">{{globalResource.completedqty}}</th>
                              <th *ngIf="taskCategory === 'GROWING'" style="width:20%">Completed Wt</th>
                              <th style="width:20%">{{globalResource.strain}}</th>
                              <th *ngIf="taskCategory != 'GROWING'"style="width:205px;">{{globalResource.lotno}}</th>    
                              <th *ngIf="taskCategory === 'GROWING'"style="width:205px;">Bin Name</th>                                                         
                              <th style="width:20%" *ngIf="showToManager&&taskCategory != 'GROWING'">{{globalResource.revqty}}</th>                              
                          </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-LotDetails let-i="rowIndex">
                          <tr>
                            <td> {{ i + 1 }} </td>
                            <!-- <td>{{LotDetails?.PackageCode}}</td> -->
                            <td *ngIf="taskCategory != 'GROWING'">{{LotDetails?.ProcessedQty}}</td>  
                            <td *ngIf="taskCategory === 'GROWING'">{{LotDetails?.CompletedWt}}</td> 
                            <td>{{LotDetails?.StrainName}}</td>
                            <td *ngIf="taskCategory != 'GROWING'" style="width:205px;"><span>{{LotDetails?.GrowerLotNo}}</span></td>  
                            <td  *ngIf="taskCategory === 'GROWING'"style="width:205px;"><span>{{LotDetails?.BinName}}</span></td>                         
                            <td *ngIf="showToManager&&taskCategory != 'GROWING'">{{LotDetails?.RevQty}}</td>                           
                          </tr>
                      </ng-template>
                      <ng-template pTemplate="emptymessage">
                          <tr>
                              <td [attr.colspan]="showToManager ? 5 : 4">
                                  {{ globalResource.norecordsfound }}
                              </td>
                          </tr>
                      </ng-template>
                  </p-table>  

                  <p-table [value]="productTypeMixPkgsDetails.PkgDetails" *ngIf="productTypeMixPkgsDetails.PkgDetails?.length" id="productTypeMixLotDetails" name="productTypeMixLotDetails">
                    <ng-template pTemplate="caption">
                            <h6>{{globalResource.mixpkgdetails}}</h6>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                          <th style="width:10%;">{{ globalResource.srno }} </th>    
                          <!-- <th style="width:20%;"> {{globalResource.pkgcode }} </th> -->
                          <th style="width:20%;">{{globalResource.completedqty}}</th>                                    
                          <th style="width:70%;">{{ globalResource.lotdetails }}</th>                              
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-pkgDetails let-k="rowIndex">
                        <tr>                          
                          <td style="width:10%;">
                            <label> {{ (k + 1) }}</label>
                          </td>
                          <!-- <td style="width:20%;">
                              <span> {{ pkgDetails?.PackageCode }}</span>
                          </td> -->
                          <td style="width:20%;">
                            <label> 1 </label>
                          </td>   
                          <td style="width:70%;">
                              <p-table [value]="getPkgMixLotDetails(pkgDetails.MixPkgId)">
                                  <ng-template pTemplate="header">
                                      <tr>
                                          <th>{{globalResource.strain}}</th>
                                          <th>{{globalResource.lotno}}</th>
                                          <th>{{globalResource.selectedwt}}</th>
                                      </tr>
                                  </ng-template>
                                  <ng-template pTemplate="body" let-mixLotDetails>
                                      <tr>

                                          <td>{{mixLotDetails?.StrainName}} </td>
                                          <td>
                                              {{mixLotDetails?.GrowerLotNo}}
                                              <app-lot-comment
                                                  [LotId]="mixLotDetails?.LotNo"
                                                  [LotCommentsCount]="mixLotDetails?.LotNoteCount"
                                                  (CommentIconClicked)="commentIconClicked($event)"
                                              ></app-lot-comment>
                                              <app-lot-note-icon
                                              [LotId]="mixLotDetails?.LotNo"
                                              (NoteIconClicked)="showLotNote($event)"
                                            ></app-lot-note-icon>
                                          </td>
                                          <td>{{mixLotDetails?.LotUsedWt}} {{globalResource.listgramunit}}</td>
                                      </tr>
                                  </ng-template>
                                  <ng-template pTemplate="emptymessage">
                                      <tr>
                                          <td [attr.colspan]="3">
                                              {{globalResource.nolotselected}}
                                          </td>
                                      </tr>
                                  </ng-template>
                              </p-table>
                          </td>                                                                     
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td [attr.colspan]="4">
                                {{ globalResource.norecordsfound }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table>  
                </div>
                <p-footer>            
                        <button type="button" pButton icon="fa-close" (click)="showProductTypeLotDetailsModal=false" label="Cancel"></button>
                        <div class="clear"></div>
                    </p-footer>
                    <div class="clear"></div>
            </p-dialog>

          <!-- End Product type lot completion and review details -->
          <div class="ui-g-12" >
              <h5 *ngIf="taskCategory != 'GROWING'">Lots For Order</h5>
              <h5 *ngIf="taskCategory === 'GROWING'">Bins For Order</h5>
              <p-table [value]="UniqueBrandStrain" id="UniqueBrandStrain" name="UniqueBrandStrain">
                  <ng-template pTemplate="header">
                      <tr>
                          <!-- <th style="width:20%">Brand</th> -->
                          <th style="width:20%">Strain</th>
                          <!-- <th style="width:20%">Lot Ids</th> -->
                          <th *ngIf="taskCategory != 'GROWING'" style="width:80%">Lot Details</th>
                          <th *ngIf="taskCategory === 'GROWING'" style="width:80%">Bin Details</th>
                          <!-- <th style="width:20%">Selected Weight</th> -->
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-orderDetail let-rowIndex="rowIndex">
                      <tr>
                          <!-- <td>{{orderDetail?.BrandName}}</td> -->
                          <td>{{orderDetail?.StrainName}}</td>
                          <!-- <td> <a [routerLink]="" (click)="openLotSelection(orderDetail?.BrandId, orderDetail?.StrainId, rowIndex)" >Select Lots</a> </td> -->
                          <td>
                              <p-table [value]="displayLotDetails(orderDetail)" id="tblOrderDetail" name="tblOrderDetail">
                                  <ng-template pTemplate="header">
                                      <tr>
                                          <th *ngIf="taskCategory != 'GROWING'" style="width:205px;">Lot No</th>
                                          <th *ngIf="taskCategory === 'GROWING'" style="width:205px;">Bin No</th>
                                          <th>Assign Wt</th>
                                          <th *ngIf="TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed">{{assignTaskResources.completedwt}}</th>
                                          <!-- <th *ngIf="TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed">{{assignTaskResources.compreturnwt}}</th> -->
                                          <th *ngIf="showToManager">{{assignTaskResources.reviewedwt}}</th>
                                          <!-- <th *ngIf="showToManager">{{assignTaskResources.revreturnwt}}</th> -->
                                      </tr>
                                  </ng-template>
                                  <ng-template pTemplate="body" let-lotDetails >
                                      <tr>
                                          <td *ngIf="taskCategory != 'GROWING'" style="width:205px;">{{lotDetails.GrowerLotNo}}

                                              <app-lot-comment
                                                  [LotId]="lotDetails?.LotId"
                                                  [LotCommentsCount]="lotDetails?.LotNoteCount"
                                                  (CommentIconClicked)="commentIconClicked($event)"
                                              ></app-lot-comment>
                                              
                                              <app-lot-note-icon
                                                [LotId]="lotDetails?.LotId"                                                
                                                (NoteIconClicked)="showLotNote($event)"
                                              ></app-lot-note-icon>
                                              
                                          </td>  
                                          <td *ngIf="taskCategory === 'GROWING'" style="width:205px;">{{lotDetails.BinName}}

                                            <!-- <app-lot-comment
                                                [LotId]="lotDetails?.LotId"
                                                [LotCommentsCount]="lotDetails?.LotNoteCount"
                                                (CommentIconClicked)="commentIconClicked($event)"
                                            ></app-lot-comment>
                                            
                                            <app-lot-note-icon
                                              [LotId]="lotDetails?.LotId"                                                
                                              (NoteIconClicked)="showLotNote($event)"
                                            ></app-lot-note-icon> -->
                                            
                                        </td>                                         
                                          <td *ngIf="taskCategory != 'GROWING'">{{lotDetails.AssignedWt}} {{globalResource.listgramunit}}</td>
                                          <td *ngIf="taskCategory === 'GROWING'">{{lotDetails.AssignedWt}} (lb)</td>  
                                          <td *ngIf="(TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed)&&taskCategory != 'GROWING'">{{lotDetails.ProcessedWt}} {{globalResource.listgramunit}}</td>
                                          <td *ngIf="(TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed)&&taskCategory === 'GROWING'">{{lotDetails.CompletedWt}}(lb)</td>
                                          <!-- <td *ngIf="TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed">{{lotDetails?.ReturnWt}}{{globalResource.listgramunit}}</td> -->
                                          <td *ngIf="showToManager&&taskCategory != 'GROWING'">{{lotDetails?.RevProcessedWt}}{{globalResource.listgramunit}}</td>
                                          <td *ngIf="showToManager&&taskCategory === 'GROWING'">{{lotDetails?.RevCompletedWt}}(lb)</td>
                                          <!-- <td *ngIf="showToManager">{{lotDetails?.RevReturnWt}}{{globalResource.listgramunit}}</td> -->
                                      </tr>
                                  </ng-template>
                                  <ng-template pTemplate="emptymessage" let-columns>
                                    <tr>
                                        <td [attr.colspan]="2">
                                          {{ globalResource.norecordsfound }}
                                        </td>
                                    </tr>
                                  </ng-template>
                              </p-table>                                
                          </td>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="2">
                          {{ globalResource.norecordsfound }}
                        </td>
                    </tr>
                  </ng-template>
              </p-table>
          </div>

          <!-- completion parameter -->  
       <div 
       *ngIf="TaskModel?.TaskStatus == taskStatus.ReviewPending||TaskModel?.TaskStatus == taskStatus.Completed"
       class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" 
       style="margin: 10px 0px; width:100%;">
             <div class="ui-grid-row">
               <div class="ui-grid-col-4">
   
               </div>
               <div class="ui-grid-col-4">
                   <strong>Task Owner</strong>
               </div>
               <div class="ui-grid-col-4" *ngIf="showToManager">
                 <strong>Reviewer</strong>
               </div>
             </div>
   
            <!-- Emp Act Hrs -->
            <div class="ui-grid-row">
                <div class="ui-grid-col-4">
                    <strong>{{ globalResource.actualhrs }}:</strong>
                </div>
                <div class="ui-grid-col-4">
                    {{ TaskModel?.ActHrs | minutesToTime }}
                </div>
                <div class="ui-grid-col-4" *ngIf="showToManager">                
                    {{ taskReviewModel?.racthrs | minutesToTime }}
                </div> 
            </div>
            <!-- End Act Hrs -->

     </div>             
   <!--End completion parameter -->
    </div>

    <p-dialog 
      header="Task Completion" 
      [(visible)]="PageFlag.showmodal" 
      modal="modal"   
      [resizable]="true" 
      [responsive]="true" 
      [width]="750"
       [minWidth]="200"
    >
      <form [formGroup]="completionForm" (ngSubmit)="submitCompleteParameter(completionForm.value)" formSubmit>        
        <div formArrayName="completeParamArr">
          <div class="ui-grid-row" *ngFor="let comp of completeParamArr?.controls; let i=index">                         
              <p-panel
                [toggleable]="true" 
                [style]="{'margin-bottom':'20px','width': '100%'}"
                [formGroupName]="i"
                [expandIcon]="'fa fa-chevron-left'"
                [collapseIcon]="'fa fa-chevron-down'"
              >
              <p-header class="accordionHeader">  
                <div class="ui-helper-clearfix"  >
                  <p class="panel-titleCompletion">
                    <span *ngIf="taskCategory != 'GROWING'" class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">
                        <span pTooltip="Brand Name">{{ TaskModel.AssignQtyDetails[i].BrandName }}</span>: <span pTooltip="Sub-Brand">{{ TaskModel.AssignQtyDetails[i].SubBrandName }}</span>
                        : <span pTooltip="Strain Name">{{ TaskModel.AssignQtyDetails[i].StrainName }}</span>
                        : <span pTooltip="Pkg Type Name">{{ TaskModel.AssignQtyDetails[i].PkgTypeName }}</span>: <span pTooltip="Package Size">{{ TaskModel.AssignQtyDetails[i].UnitValue }}{{globalResource.listgramunit}}</span>
                        <!-- : <span pTooltip="Item Qty">{{ TaskModel.AssignQtyDetails[i].ItemQty }}</span>                          -->
                    </span>
                    <span *ngIf="taskCategory === 'GROWING'" class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">
                      <span pTooltip="Strain Name">{{ TaskModel.AssignQtyDetails[i].StrainName }}</span>
                      : <span pTooltip="Pkg Type Name">{{ TaskModel.AssignQtyDetails[i].PkgTypeName }}</span>
                      <!-- : <span pTooltip="Item Qty">{{ TaskModel.AssignQtyDetails[i].ItemQty }}</span>                          -->
                  </span>

                    <span *ngIf="taskCategory != 'GROWING'"class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">                    
                      Assign Qty:{{ TaskModel.AssignQtyDetails[i].AssignedQty }}
                  </span>
                  
                </p>  
                <div style="display: inline-block;vertical-align: top;" *ngIf="taskCategory != 'GROWING'">
                  <input                    
                      type="text"
                      pTooltip="Package Code"                      
                      pInputText
                      autocomplete="off"
                      pKeyFilter="alphanum"                                   
                      placeholder="Package Code"
                      formControlName="packageCode"                                            
                      id="packagecode"
                      name="packagecode"   
                      class="reviewedQty"
                    />
                    <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                    *ngIf="!comp.controls['packageCode'].valid&&comp.controls['packageCode'].dirty">
                      <!-- <span *ngIf="comp.controls['packageCode'].errors['required']">
                        {{ globalResource.pkgcoderequire }}
                      </span> -->
                      <span *ngIf="comp.controls['packageCode'].hasError('duplicatepkgcode')">
                          {{ assignTaskResources.duplicatePackageCode }}
                      </span>
                  </div>
                </div>  
                <div style="display: inline-block;vertical-align: top;" *ngIf="taskCategory != 'GROWING'">
                    <!-- readonly="true" -->
                    <input
                      pTooltip="Completed Qty"           
                      type="number"
                      pKeyFilter="pint"
                      pInputText
                      autocomplete="off"
                      (change)="compQtyOnChange(i, comp)"
                      [(ngModel)]="disableCompletedWtArr[i]"                     
                      placeholder="Completed Qty"
                      formControlName="completedWt"                                            
                      id="completedwt"
                      name="completedwt"
                      class="reviewedQty"

                    />

                    <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                      *ngIf="!comp.controls['completedWt'].valid&&comp.controls['completedWt'].dirty">
                      <span *ngIf="comp.controls['completedWt'].hasError('pkgqtynotmatched')">
                          {{ assignTaskResources.pkgqtynotmatched }}
                      </span>
                      <span *ngIf="comp.controls['completedWt'].hasError('max')">
                          {{ assignTaskResources.compqtygreaterassignqty }}
                      </span>
                      <span *ngIf="comp.controls['completedWt'].hasError('min')">
                          Qty less than 0 not allowed.
                      </span>
                  </div>
                    </div>
                </div>
              </p-header>
              
             <div formArrayName="LotDetails" class="panel-content" >
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th *ngIf="taskCategory != 'GROWING'">{{ globalResource.lotno }}</th>
                      <th *ngIf="taskCategory === 'GROWING'">Bin No</th>
                      <th>{{ globalResource.assignwt }}</th>
                      <th *ngIf="taskCategory != 'GROWING'">{{ globalResource.pkgcompletedqty }}</th>
                      <th *ngIf="taskCategory === 'GROWING'">pkg. Completed Wt<span class="star">*</span></th>
                      <th *ngIf="taskCategory != 'GROWING'">{{ globalResource.completedwt }}</th>
                      <th>{{ globalResource.balancedwt }}</th>
                    </tr>
                  </thead>                  
                  <tbody>
                    <tr 
                      *ngFor="let lot of lotInnerFormArray(comp).controls; let j=index;" 
                      [formGroupName]="j"                      
                      >                                                                
                          <td  
                          *ngIf="taskCategory != 'GROWING'" pTooltip="Grower Lot No." style="width:205px;">                                                      
                            <label>
                                {{ lot.value.GrowerLotNo }}
      
                                <app-lot-comment
                                    [LotId]="lot.value.LotId"
                                    [LotCommentsCount]="lot.value.LotNoteCount"
                                    (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="lot.value.LotId"                            
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon>
      
                            </label>
                          </td>
                          <td 
                          *ngIf="taskCategory === 'GROWING'" pTooltip="Bin No." style="width:205px;">                                                      
                            <label>
                                {{ lot.value.LabelName }}
      
                                <!-- <app-lot-comment
                                    [LotId]="lot.value.LotId"
                                    [LotCommentsCount]="lot.value.LotNoteCount"
                                    (CommentIconClicked)="commentIconClicked($event)"
                                ></app-lot-comment>

                                <app-lot-note-icon
                                  [LotId]="lot.value.LotId"                            
                                  (NoteIconClicked)="showLotNote($event)"
                                ></app-lot-note-icon> -->
      
                            </label>
                          </td>
                          <td pTooltip="Assigned Weight" >    
                            <label>{{ lot.value.AssignedWt }}</label>
                          </td>
                            <td>    
                            <input  
                              pInputText
                              autocomplete="off"                 
                              type="number"                                                  
                              pKeyFilter="pint"                                                   
                              (change)="calculateTotalCompletedWt(i, comp, lot)"
                              maxlength="AppConstants.maxLength"
                              placeholder="Packages Completed"
                              formControlName="lotCompletedWt"                                            
                              id="lotcompletedwt"
                              name="lotcompletedwt"                      
                            /> 
                            <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                            *ngIf="!lot.controls['lotCompletedWt'].valid&&lot.controls['lotCompletedWt'].dirty"> 
                              <!-- <span *ngIf="lot.controls['lotCompletedWt'].hasError('min')"> -->
                                  This Field Is Mandatory.
                              <!-- </span>  -->
                            </div>                  
                        
                          </td>   
                          <td 
                          *ngIf="taskCategory != 'GROWING'" pTooltip="Completed Weight" >    
                              <label>{{ lotMap.get(lot.value.LotId ) || 0 }}{{globalResource.listgramunit}}</label>
                          </td>
                          <td pTooltip="Balanced Weight" >    
                              <label 
                              *ngIf="taskCategory != 'GROWING'">{{ lotBalancedWtMap.get(lot.value.LotId) || 0 }}{{globalResource.listgramunit}}</label>
                              <label 
                              *ngIf="taskCategory === 'GROWING'">{{ lotBalancedWtMap.get(lot.value.BinId) || 0 }}(lb)</label>
                          </td>      
                    </tr>
                  </tbody>
            </table> 
            </div>

            <!-- Lot Mixing -->
            <div class="divLotMixing panel-content" formArrayName="MixLotDetails" *ngIf="comp.value.completedWt > 0 && lotInnerFormArray(comp).controls.length > 1 && taskCategory != 'GROWING'">
                <strong><span class="ui-dialog-title">{{ assignTaskResources.mixlotdetails }}</span></strong>
                <hr>
<div  style="position: relative;">
  <table class="table table-bordered" style="width: 98%;">
    <thead>
      <tr>
          <th>{{ globalResource.no }} </th>
          <th>{{ globalResource.pkg }} </th>                                        
          <th>{{ globalResource.lotdetails }}</th> 
          <th></th>
      </tr>
    </thead>                 
    <tbody>
      <tr *ngFor="let mixLot of mixLotDetailsArr(comp).controls; let k=index;" [formGroupName]="k">                                                                    
          <td style="width:5%;">                                                      
            <label>
                {{ k + 1 }}                                         
            </label>
          </td>
          <td style="width:30%;">    
            <label>{{ globalResource.pkg }} {{ (k + 1) | number:'2.0-0' }}</label>
          </td>
          <td style="width:60%;">  
            <!-- Selected Mix Lot Details -->
              <!-- <h6 class="first">{{assignTaskResources.mixlotdetails}}:</h6> -->
              <p-table [value]="selectedMixLotsArray[i +''+ k]">
                  <ng-template pTemplate="header">
                      <tr>
                          <th>{{globalResource.lotno}}</th>
                          <th>{{globalResource.selectedwt}}</th>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-lotDetails>
                      <tr>
                          <td>
                              {{lotDetails?.GrowerLotNo}}
                              <app-lot-comment
                                  [LotId]="lotDetails?.LotNo"
                                  [LotCommentsCount]="lotDetails?.LotNoteCount"
                                  (CommentIconClicked)="commentIconClicked($event)"
                              ></app-lot-comment>
                              <app-lot-note-icon
                              [LotId]="lotDetails?.LotNo"
                              (NoteIconClicked)="showLotNote($event)"
                            ></app-lot-note-icon>
                          </td>
                          <td>{{lotDetails?.SelectedWt}} {{globalResource.listgramunit}}</td>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="emptymessage">
                      <tr>
                          <td [attr.colspan]="2">
                            {{globalResource.nolotselected}}
                          </td>
                      </tr>
                  </ng-template>
              </p-table>
              <!-- End of Selected Mix Lot Details -->
              <span>
                  <a class="btn-link" [routerLink]="" (click)="openMixLotSelection(mixLot, k, i)" >Select Lots</a>
              </span>  
          </td>  
          <td style="width:5%;">    
              <a (click)="deleteItem(comp, i, k)" >                                  
                  <span class="fa fa-minus-circle">
                  </span>
              </a>          
          </td>   
      </tr>
    </tbody>
</table> 
<a class="addbtn" style="position: absolute;bottom: 0px;right: -6px;" [routerLink]="" (click)="addItem(comp,mixLot)">
    <span class="fa fa-plus-circle">
    </span>
</a>
</div>
            </div>
            <!-- End Of Lot Mixing -->
         
              </p-panel>
            </div>

            <!-- <pre>{{completionForm.value | json}}</pre> -->
          </div>
            
          <!-- Return Weight Entries -->
           <div class="ui-g-12" *ngIf="lotReturnWtArr?.controls.length &&  enabledReturnwtbox && taskCategory != 'GROWING' " formArrayName="lotReturnWtArr">
            <h5>Lot Return Weight Details</h5>
            <p-table [value]="lotReturnWtArr?.controls">
                <ng-template pTemplate="header">
                    <tr>
                        <th>{{globalResource.lotno}}</th>
                        <th>{{assignTaskResources.assignedwt}}</th>
                        <th>{{assignTaskResources.processedwt}}</th>                                    
                        <th>{{assignTaskResources.returnwt}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-returnObject let-i="rowIndex" >
                    <tr [formGroupName]="i">
                        <td>{{  returnObject.value.GrowerLotNo}}</td>                         
                        <td>{{ returnObject.value.AssignedWt || 0 }} {{globalResource.listgramunit}}</td>                        
                        <td>{{ lotMap.get(returnObject.value.LotId) || 0 }} {{globalResource.listgramunit}}</td>
                        <td>
                          <input
                            type="number"                                               
                            pKeyFilter="num"                     
                            pInputText                        
                            formControlName="lotReturnedWt"
                            id="answer"
                            name="answer"
                            style="width:100%;"
                          />
                          <div appErrorTooltip class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                            *ngIf="!returnObject.controls['lotReturnedWt'].valid&&returnObject.controls['lotReturnedWt'].dirty
                            && returnObject.controls['lotReturnedWt'].errors['required']"
                            >
                              <span *ngIf="returnObject.controls['lotReturnedWt'].errors['required']">
                                {{ assignTaskResources.returnwt }} {{ globalResource.isrequiredmsg }}
                              </span>
                          </div>

                            <div class="ui-message ui-messages-error ui-corner-all"
                            *ngIf="!returnObject.controls['lotReturnedWt'].valid&&returnObject.controls['lotReturnedWt'].dirty
                            && returnObject.controls['lotReturnedWt'].errors['thresholdExceed']"
                            >
                              <span *ngIf="returnObject.controls['lotReturnedWt'].errors['thresholdExceed']">
                                {{ assignTaskResources.returnwtnotmatchedwithtolerance }}
                              </span>
                        </div>  
                          <!-- (change)="assignWtOnChange(budOrderPacket)" -->
                         </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                  <tr>
                      <td [attr.colspan]="3">
                         {{ globalResource.norecordsfound }}
                      </td>
                  </tr>
                </ng-template>
            </p-table>
          </div> 
          <!-- End of Return Weight Entries -->

          <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
                <!-- <div class="ui-grid-row">
                      
                    <div class="ui-grid-col-4 text-right">
                      {{ assignTaskResources.misccost }} :
                    </div>
                    <div class="ui-grid-col-5">
                        <input type="text"
                          OnlyNumber="true" 
                          pInputText                               
                          formControlName="MiscCost"
                          id="misccost"
                          name="misccost"      
                        />               
                    </div> 
                   
                </div> -->
    
                <div class="ui-grid-row">
                   
                    <div class="ui-grid-col-4 text-right">
                      {{ assignTaskResources.comment }}:
                    </div>
                    <div class="ui-grid-col-5">
                        <textarea                        
                          pInputTextarea                 
                          formControlName="MiscComment"
                          id="misccomment"
                          name="misccomment"
                          maxlength="500"
                          class="clsControl"                  
                        ></textarea>
                    </div> 
                   
                </div>
            </div>
        <p-footer>
            <!-- [disabled]="!completionForm.valid" -->
          <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
          <!-- [disabled]="!completionForm.valid" -->
          <button type="button" class="ui-button-secondary" pButton icon="fa-close" (click)="PageFlag.showmodal=false" label="Cancel"></button>
        </p-footer>
    </form>
</p-dialog>

<!-- Task Review Model -->
<p-dialog header="Submit Review" [(visible)]="PageFlag.showReviewmodal" modal="modal" [resizable]="true" [responsive]="true" [width]="750" [minWidth]="200" >
    <form [formGroup]="reviewForm" (ngSubmit)="submitReviewParameter(reviewForm.value)" formSubmit>

      <div formArrayName="reviewParamArr">
        <div class="ui-grid-row" *ngFor="let comp of reviewParamArr?.controls; let i=index">                         
            <p-panel
          
              [toggleable]="true" 
              [style]="{'margin-bottom':'20px','width': '100%'}"
              [formGroupName]="i"
            >
            <p-header class="accordionHeader">  
              <div class="ui-helper-clearfix" >
                <p class="panel-title">
                  <span *ngIf="taskCategory != 'GROWING'"class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">
                      <span pTooltip="Brand Name">{{ TaskModel.AssignQtyDetails[i].BrandName }}</span>
                      : <span pTooltip="Sub-Brand">{{ TaskModel.AssignQtyDetails[i].SubBrandName }}</span>
                      : <span pTooltip="Strain Name">{{ TaskModel.AssignQtyDetails[i].StrainName }}</span>
                      : <span pTooltip="Pkg Type Name">{{ TaskModel.AssignQtyDetails[i].PkgTypeName }}</span>
                      : <span pTooltip="Package Size">{{ TaskModel.AssignQtyDetails[i].UnitValue }} {{globalResource.listgramunit}}</span>
                      <!-- : <span pTooltip="Item Qty">{{ TaskModel.AssignQtyDetails[i].ItemQty }}</span>                         -->
                  </span>

                  <span *ngIf="taskCategory === 'GROWING'"class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">
                    <span pTooltip="Strain Name">{{ TaskModel.AssignQtyDetails[i].StrainName }}</span>
                    : <span pTooltip="Pkg Type Name">{{ TaskModel.AssignQtyDetails[i].PkgTypeName }}</span>
                    <!-- : <span pTooltip="Item Qty">{{ TaskModel.AssignQtyDetails[i].ItemQty }}</span>                         -->
                  </span>

                  <span *ngIf="taskCategory != 'GROWING'"class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px"
                  pTooltip="Completed Qty"
                  >                    
                    Completed Qty:{{ TaskModel.AssignQtyDetails[i].CompletedQty }} 
                  </span>
                  <span *ngIf="taskCategory != 'GROWING'"class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px"
                  pTooltip="Package Code"
                  >                    
                    Pkg Code: {{ TaskModel.AssignQtyDetails[i].PackageCode }} 
                  </span>
                </p>
                  <input                    
                    type="number"
                    pKeyFilter="pint"
                    pInputText
                    autocomplete="off"
                    [ngModel]="disableCompletedWtArr[i]"
                    readonly="true"
                    placeholder="Reviewed Qty"
                    formControlName="reviewedWt"                                            
                    id="reviewedwt"
                    name="reviewedwt"   
                    class="reviewedQty"

                  />
                  <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                  *ngIf="!comp.controls['reviewedWt'].valid&&comp.controls['reviewedWt'].dirty"> 
                    <span *ngIf="comp.controls['reviewedWt'].hasError('min')">
                        Qty less than 0 not allowed.
                    </span> 
                  </div>
              </div>
            </p-header>
            
           <div formArrayName="LotDetails" class="panel-content" >
             <table class="table table-bordered">
               
            
            <tr *ngFor="let lot of lotInnerFormArray(comp).controls; let j=index;" [formGroupName]="j">               
              <td style="width:205px;">  
                                                                  
                    <label *ngIf="taskCategory != 'GROWING'">
                        {{ lot.value.GrowerLotNo }}

                        <app-lot-comment
                            [LotId]="lot.value.LotId"
                            [LotCommentsCount]="lot.value.LotNoteCount"
                            (CommentIconClicked)="commentIconClicked($event)"
                        ></app-lot-comment>

                        <app-lot-note-icon
                          [LotId]="lot.value.LotId"                          
                          (NoteIconClicked)="showLotNote($event)"
                        ></app-lot-note-icon>

                    </label>
                    <label *ngIf="taskCategory === 'GROWING'">
                      {{ lot.value.LabelName }}

                  </label>
                  </td>
                  <td > 
                        <label *ngIf="taskCategory != 'GROWING'">{{ lot.value.ProcessedQty }}</label>
                        <label *ngIf="taskCategory === 'GROWING'">{{ lot.value.CompletedWt }}</label>
                  </td>
                  <td> 
                    <input                    
                      type="number"
                      pKeyFilter="pint"
                      readonly="true"
                      maxlength="10"
                      pKeyFilter="int"
                      pInputText
                      autocomplete="off"
                      (change)="calculateTotalReviewedWt(i, comp, lot)"
                      placeholder="Packets Review Qty"
                      formControlName="lotReviewedWt"
                      id="lotcompletedwt"
                      name="lotcompletedwt"
                    />  

                    <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                    *ngIf="!lot.controls['lotReviewedWt'].valid&&lot.controls['lotReviewedWt'].dirty"> 
                    <span *ngIf="lot.controls['lotReviewedWt'].hasError('min')">
                        Qty less than 0 not allowed.
                    </span> 
                  </div>
               
              </td>                
            </tr>
          </table>
          </div>
       
          <!-- Lot Mixing -->
          <div class="divRevLotMixing panel-content" formArrayName="MixLotDetails" *ngIf="mixLotDetailsArr(comp).controls.length > 0">
            <strong><span class="ui-dialog-title">{{ assignTaskResources.mixlotdetails }}</span></strong>
            <hr>

            <table class="table table-bordered">
                <thead>
                  <tr>
                      <th>{{ globalResource.no }} </th>
                      <th>{{ globalResource.pkg }} </th>                                        
                      <th>{{ globalResource.lotdetails }}</th> 
                      <!-- <th></th> -->
                  </tr>
                </thead>                 
                <tbody>
                  <tr *ngFor="let mixLot of mixLotDetailsArr(comp).controls; let k=index;" [formGroupName]="k">                                                                    
                      <td style="width:5%;">                                                      
                        <label>
                            {{ k + 1 }}                                         
                        </label>
                      </td>
                      <td style="width:30%;">    
                        <label>{{ globalResource.pkg }} {{ (k + 1) | number:'2.0-0' }}</label>
                      </td>
                      <td style="width:60%;">  
                        <!-- Selected Mix Lot Details -->
                          <!-- <h6 class="first">{{assignTaskResources.mixlotdetails}}:</h6> -->
                          <p-table [value]="selectedMixLotsArray[i +''+ k]">
                              <ng-template pTemplate="header">
                                  <tr>
                                      <th>{{globalResource.strain}}</th>
                                      <th>{{globalResource.lotno}}</th>
                                      <th>{{globalResource.selectedwt}}</th>
                                  </tr>
                              </ng-template>
                              <ng-template pTemplate="body" let-lotDetails>
                                  <tr>
                                      <td> {{lotDetails?.StrainName}} </td>
                                      <td>
                                          {{lotDetails?.GrowerLotNo}}
                                          <app-lot-comment
                                              [LotId]="lotDetails?.LotNo"
                                              [LotCommentsCount]="lotDetails?.LotNoteCount"
                                              (CommentIconClicked)="commentIconClicked($event)"
                                          ></app-lot-comment>
                                          <app-lot-note-icon
                                          [LotId]="lotDetails?.LotNo"
                                          (NoteIconClicked)="showLotNote($event)"
                                        ></app-lot-note-icon>
                                      </td>
                                      <td>{{lotDetails?.SelectedWt}} {{globalResource.listgramunit}}</td>
                                  </tr>
                              </ng-template>
                              <ng-template pTemplate="emptymessage">
                                  <tr>
                                      <td [attr.colspan]="2">
                                          No Lots Selected.
                                      </td>
                                  </tr>
                              </ng-template>
                          </p-table>
                          <!-- End of Selected Mix Lot Details -->
                          <!-- <span>
                              <a class="btn-link" [routerLink]="" (click)="openMixLotSelection(mixLot, k, i)" >Select Lots</a>
                          </span>   -->
                      </td>  
                      <!-- <td style="width:5%;">    
                          <a (click)="deleteItem(comp, i, k)" >                                  
                              <span class="fa fa-minus-circle">
                              </span>
                          </a>          
                      </td>    -->
                  </tr>
                </tbody>
            </table> 
            <!-- <a class="addbtn" [routerLink]="" (click)="addItem(comp,mixLot)">
                <span class="fa fa-plus-circle">
                </span>
            </a> -->
        </div>
        <!-- End Of Lot Mixing -->
            </p-panel>
          </div>          
          <!-- <pre>{{completionForm.value | json}}</pre> -->
        </div>

        <!-- Return Weight Entries -->
         <div class="ui-g-12" *ngIf="enabledReturnwtbox&&taskCategory != 'GROWING' "  formArrayName="lotReturnWtArr">
          <h5>Lot Return Weight Details</h5>
          <p-table [value]="lotReturnWtRevArr?.controls">
              <ng-template pTemplate="header">
                  <tr>
                      <th>{{globalResource.lotno}}</th>
                      <th>{{assignTaskResources.assignedwt}}</th>
                      <th>{{assignTaskResources.processedwt}}</th>                 
                      <th>{{assignTaskResources.returnwt}}</th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-returnObject let-i="rowIndex" >
                  <tr [formGroupName]="i">
                      <td>{{  returnObject.value.GrowerLotNo}}</td>
                      <td>{{ returnObject.value.AssignedWt || 0 }} {{globalResource.listgramunit}}</td>  
                      <td>{{ lotMap.get(returnObject.value.LotId) || 0 }} {{globalResource.listgramunit}} </td>                                             
                      <td>
                        <input
                          type="number"                                               
                          pKeyFilter="num"                     
                          pInputText                        
                          formControlName="lotReturnedWt"
                          id="answer"
                          name="answer"
                          style="width:100%;"
                        />                     
                        <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                          *ngIf="!returnObject.controls['lotReturnedWt'].valid&&returnObject.controls['lotReturnedWt'].dirty
                          && returnObject.controls['lotReturnedWt'].errors['required']"
                          >
                            <span *ngIf="returnObject.controls['lotReturnedWt'].errors['required']">
                              {{ assignTaskResources.returnwt }} {{ globalResource.isrequiredmsg }}
                            </span>
                        </div>                     
                      </td>
                  </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="3">
                       {{ globalResource.norecordsfound }}
                    </td>
                </tr>
              </ng-template>
          </p-table>
        </div> 
        <!-- End of Return Weight Entries -->

        <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
            <div class="ui-grid-row">
               
              <div class="ui-grid-col-4 text-right">
                {{ assignTaskResources.actualhrs }}:
              </div>
              <div class="ui-grid-col-3">
                  {{ TaskModel?.ActHrs | minutesToTime }}
              </div>
              <div class="ui-grid-col-5">
                   <!-- <p-calendar 
                    required 
                    name="acthrs"
                    [stepHour]="1" 
                    [stepMinute]="15" 
                    [timeOnly]="true" 
                    [showTime]="true" 
                    formControlName="ActHrs"
                    hourFormat="24">
                  </p-calendar> -->

                  <div class="ui-inputgroup ui-inputgroup-border" >
                      <input type="number"                   
                          pInputText
                          autocomplete="off" 
                          [(ngModel)]="taskReviewModel.racthrs"                         
                          formControlName="ActHrs"
                          pKeyFilter="int"
                          id="acthrs"
                          name="acthrs"                      
                        /> 
                        <span>:</span>
                        <input type="number"                  
                          pInputText
                          autocomplete="off"                   
                          [(ngModel)]="taskReviewModel.ractmins"                         
                          formControlName="ActMins"
                          id="actmins"
                          pKeyFilter="int"
                          name="actmins"                      
                        />
                        <!-- Added by Devdan :: Sec to Min change :: 06-Nov-2018 -->
						            <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                          *ngIf="!reviewForm.controls['ActMins'].valid&&reviewForm.controls['ActMins'].dirty">
                            <span *ngIf="reviewForm.controls['ActMins'].errors['max']">
                              {{ globalResource.maxMinSecValue }}
                            </span>
                        </div>
                        <!-- ADDED BY DEVDAN :: 06-NOV-2018 :: ADDING TEXTBOX FOR SECONDS -->
                        <span>:</span>
                        <input type="number"                  
                          pInputText         
                          autocomplete="off"      
                          pKeyFilter="int"    
                          [(ngModel)]="taskReviewModel.ractsecs"                         
                          formControlName="ActSecs"
                          id="actsecs"
                          name="actsecs"                  
                        />
                        <div class="ui-message ui-messages-error-Sec ui-corner-all" appErrorTooltip
                          *ngIf="!reviewForm.controls['ActSecs'].valid&&reviewForm.controls['ActSecs'].dirty">
                            <span *ngIf="reviewForm.controls['ActSecs'].errors['max']">
                              {{ globalResource.maxMinSecValue }}
                            </span>
                        </div>
                        <!-- END :: Sec to Min change :: 06-Nov-2018 -->
                    </div>
              </div>              
          </div>
            <div class="ui-grid-row">
                 
                <div class="ui-grid-col-3 text-right">
                  {{ assignTaskResources.misccost }}:
                </div>
                <div class="ui-grid-col-4">
                    {{ TaskModel?.MiscCost | currency }}
                </div>
                <div class="ui-grid-col-5">
                    <input type="number"
                      OnlyNumber="true" 
                      pInputText
                      autocomplete="off"                               
                      formControlName="MiscCost"
                      id="misccost"
                      name="misccost"      
                    />               
                </div> 
               
            </div>

            <div class="ui-grid-row">
               
                <div class="ui-grid-col-3 text-right">
                  {{ assignTaskResources.comment }}:
                </div>
                <div class="ui-grid-col-4">
                   {{ TaskModel?.Comments }}
                </div>
                <div class="ui-grid-col-5">
                    <textarea                        
                      pInputTextarea                 
                      formControlName="MiscComment"
                      id="rmisccomment"
                      name="rmisccomment"
                      maxlength="500"
                      class="clsControl"                  
                    ></textarea>
                </div> 
               
            </div>
        </div>
      <p-footer>
          <!-- [disabled]="!completionForm.valid" -->
        <button type="submit" pButton icon="fa-check"  label="Confirm" ></button>
        <!-- [disabled]="!reviewForm.valid" -->
        <button type="button" class="ui-button-secondary" pButton icon="fa-close" (click)="PageFlag.showReviewmodal=false" label="Cancel"></button>
      </p-footer>
  </form>
</p-dialog>
<!-- End of Task Review Model -->

<p-dialog header="Select Lots"
    [(visible)]="showMixLotSelectionModel"
    modal="modal"
    [resizable]="true"
    [responsive]="true" [width]="600" [minWidth]="300"  >

    <form [formGroup]="questionForm" (ngSubmit)="submitMixLotDetails(questionForm)" formSubmit >
          <!-- (ngSubmit)="submit(questionForm)" -->
    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">

      <div class="ui-g">
              <div class="ui-g-12 ui-md-6">
                  <label>
                    <strong>Genetics:</strong>  
                  </label>

                  <label>
                    {{ selMixLotPkgRow?.GeneticsName }}
                  </label>
                </div>

                <div class="ui-g-12 ui-md-6">
                    <label>
                      <strong>{{globalResource.requirewt}}:</strong>
                    </label>

                    <label>
                      {{ selMixLotPkgRow?.RequireWt }} {{globalResource.measure}}
                    </label>
                  </div>

        </div>
        <div formArrayName="questions">
          
        <p-table [value]="questions?.controls" id="tblMixLotSelection">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:20.33333333%">Strain</th>
                    <th style="width:170px">{{globalResource.lotno}}</th>
                    <th style="width:20.33333333%">{{globalResource.completedwt}}</th>
                    <th style="width:20.33333333%">{{globalResource.balancedwt}}</th>
                    <th style="width:20.33333333%">{{globalResource.selectedwt}}</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-question let-i="rowIndex" >
                <tr [formGroupName]="i">
                    <td pTooltip="Completed Weight" >    
                        <label>{{  (question?.value.strainName) }}</label>
                    </td>
                    <td style="width:170px">
                      <!-- comment checkbox :: swapnil 05-april-2019 -->
                        <!-- <p-checkbox
                          label="{{ question?.value.GrowerLotNo  }}"
                          formControlName="question"
                          (ngModelChange)="changeValidator($event, i)"
                          binary="true"
                        ></p-checkbox> -->
                        <label>{{ question?.value.GrowerLotNo  }}</label>

                        <app-lot-comment
                            [LotId]="question?.value.LotNo"
                            [LotCommentsCount]="question?.value.LotNoteCount"
                            (CommentIconClicked)="commentIconClicked($event)"
                        ></app-lot-comment>

                        <app-lot-note-icon
                          [LotId]="question?.value.LotNo"                                
                          (NoteIconClicked)="showLotNote($event)"
                        ></app-lot-note-icon>
                                                
                    </td>
                    <td pTooltip="Completed Weight" >    
                        <label>{{ lotMap.get(question?.value.LotNo) || 0 }}{{globalResource.listgramunit}}</label>
                    </td>
                    <td pTooltip="Balanced Weight" >    
                        <label>{{ lotBalancedWtMap.get(question?.value.LotNo) || 0 }}{{globalResource.listgramunit}}</label>
                    </td> 
                    <td>
                      <input
                        type="number"
                        OnlyNumber="true"
                        pInputText
                        pKeyFilter="pnum"
                        autocomplete="off"
                        formControlName="answer"
                        id="answer"
                        name="answer"
                        style="width:100%;"
                      />
                      <!-- <div class="ui-message ui-messages-error-Sec ui-corner-all" appErrorTooltip
                        *ngIf="!questions?.controls['answer'].valid&&questions.controls['answer'].dirty">
                          <span *ngIf="questions.controls['answer'].errors['required']">
                            Required
                          </span>
                      </div> -->
                      <!-- (change)="CalculateMixLotWt(question, 'SPECIFIC')" -->
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                  <td *ngIf="taskCategory != 'GROWING'" [attr.colspan]="3">
                    {{ assignTaskResources.nolotpresent }} "{{ selLotBrandStrainRow?.StrainName }}".
                  </td>
                  <td *ngIf="taskCategory === 'GROWING'" [attr.colspan]="3">
                    {{ assignTaskResources.nobinpresent }} "{{ selLotBrandStrainRow?.StrainName }}".
                  </td>
              </tr>
            </ng-template>
        </p-table>
        </div>              
      </div>
      <p-footer class="text-right">

        <button type="submit"  pButton icon="fa-check"  label="Confirm" id="btnMixLotSelectionConfirm" name="btnMixLotSelectionConfirm" ></button>
        <!-- [disabled]="questionForm.invalid" -->
        <button type="button" pButton icon="fa-close" (click)="showMixLotSelectionModel=false" label="Cancel"></button>
    </p-footer>
  </form>
</p-dialog>
</div>

<p-growl [(value)]="msgs" life='5000' ></p-growl>
