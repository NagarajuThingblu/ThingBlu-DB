<div class="content-section implementation GridDemo orderRequest">
  <div class="ui-g">
    <div class="ui-g-12">
      <p-panel header="Order Form" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
        <p-header>
          
        </p-header>
        <form
        [formGroup]="orderForm" (ngSubmit)="onSubmit(orderForm.value)">
        <div class="ui-g">
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="customer" class="towlable">Customer<span class="star">*</span></label>:
                <p-dropdown
                [filter] ="true"
                id="customer"
                [options]="customersList"
                (onChange)="getDetailsOnCustomerName($event)"
                formControlName="customer"
                placeholder="-- Select --"
                [autoWidth]="false"
                class="clsControl"
                name="customer"
                  >
                </p-dropdown>

              </div>
            </div>
          </div>
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="shippingaddr" class="towlable">Shipping Address<span class="star">*</span></label>:
                <textarea 
                  pInputTextarea           
                  name="shippingaddr"
                  id="shippingaddr"
                  type="text"
                  autocomplete="new-password"
                  class="clsControl"
                  formControlName="shippingaddr"
                ></textarea>

              </div>
            </div>
          </div>
        </div>

        <div class="ui-g">
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="email" class="towlable">Email<span class="star">*</span></label>:
                <input pInputText
                name="email"
                id="email"
                autocomplete="new-password"
                type="text"
                class="clsControl"
                formControlName="email"
                placeholder="Enter Email Address"
              />
              </div>
            </div>
          </div>
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="country" class="towlable">Country<span class="star">*</span></label>:
                <input pInputText
                  name="country"
                  id="country"
                  autocomplete="new-password"
                  type="text"
                  class="clsControl"
                  formControlName="country"
                />

              </div>
            </div>
          </div>
        </div>

        <div class="ui-g">
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="state" class="towlable">State<span class="star">*</span></label>:
                <input pInputText
                  name="state"
                  id="state"
                  autocomplete="new-password"
                  type="text"
                  class="clsControl"
                  formControlName="state"
                />

              </div>
            </div>
          </div>
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="city" class="towlable">City<span class="star">*</span></label>:
                <input pInputText
                name="city"
                id="city"
                autocomplete="new-password"
                type="text"
                class="clsControl"
                formControlName="city"
              />
              <input pInputText
                name="cityid"
                id="cityid"
                autocomplete="new-password"
                type="hidden"
                class="clsControl"
                formControlName="cityid"
              />
              </div>
            </div>
          </div>
        </div>
        <div class="ui-g">
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="zipcode" class="towlable">ZipCode<span class="star">*</span></label>:
                <input pInputText
                name="zipcode"
                id="zipcode"
                autocomplete="new-password"
                type="text"
                class="clsControl"
                formControlName="zipcode"
              />

              </div>
            </div>
          </div>
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="deliverydate" class="towlable">Ship Date<span class="star">*</span></label>:
                <p-calendar             
                [showIcon]="true"  
              
                formControlName="deliverydate"          
                class="clsControl"
                id="deliverydate"
                name="deliverydate"
                >
                <!-- [defaultDate]="defaultDate" -->
              </p-calendar>

              </div>
            </div>
          </div>
        </div>
<div class="ui-g">
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <div class="le-su-12">
        <label for="orderno" class="towlable">Order Number<span class="star">*</span></label>:
        <input pInputText
        name="orderno"
        id="orderno"
        autocomplete="new-password"
        type="text"
        class="clsControl"
        formControlName="orderno"
      />
      </div>
    </div>
  </div>
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <div class="le-su-12">
        <label for="shippingpref" class="towlable">Shipping Preference<span class="star">*</span></label>:
        <p-dropdown
        [filter] ="true"
        id="shippingpref"
        [options]="priorities"
        formControlName="shippingpref"
        placeholder="-- Select --"
        [autoWidth]="false"
        class="clsControl"
        name="shippingpref">
        </p-dropdown>
      </div>
    </div>
  </div>
</div>
<!-- <div class="ui-g">
  <div class="ui-g-12 ui-md-6">
    <div class="paddingRL">
      <div class="le-su-12">
        <label for="comment">Comment</label>:
                   
  <textarea                        
    pInputTextarea                        
    
    formControlName="comment"
    id="comment"
    name="comment"
    maxlength="500"
    class="clsControl"
    binary="true"
  ></textarea>
      </div>
    </div>
  </div>
</div> -->
          
        
        <div class="ui-g">
          <h5><b>Order Details</b></h5>
          <div formArrayName="items" style="position: relative">
            <div style="width:calc(100% - 20px);float:left;">
              <p-table  [value]="OrderFormDetailsArr?.controls" id="OrderFormDetails" name="OrderFormDetails">
                <ng-template pTemplate="header">
                  <tr> 
                    <th>Strain
                      <span class="star">*</span>
                    </th>
                    <th>Product Type
                      <span class="star">*</span>
                    </th>
                    <th>Skew Type
                      <span class="star">*</span>
                    </th>
                   
                    <th>Package Type
                      <span class="star">*</span>
                    </th>
                    <th>Package Size(lb)
                      <span class="star">*</span>
                    </th>
                    <th>Order Quantity
                      <span class="star">*</span>
                    </th>
                    <!-- <th>Order Cost
                      <span class="star">*</span>
                    </th> -->
                    <th style="width: 60px;">Action
                    </th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item let-i="rowIndex" >
                  <tr [formGroupName]="i">
                    <td>
                      <p-dropdown
                      id="strain"
                      formControlName="strain"
                      placeholder="-- Select --"
                      [autoWidth]="false"
                      class="clsControl"
                      (onChange)="getAllDetails( i,$event)"
                      [options]="strains"
                      name="strain">
                      
                    </p-dropdown>
                    <!-- (onChange)="getAllDetails( i,$event)" -->
                  </td>
                  <td>
                    <p-dropdown
                    id="producttype"
                    formControlName="producttype"
                    placeholder="-- Select --"
                    [autoWidth]="false"
                    (onChange)="getAllDetailsOnProducType( i,$event)"
                    class="clsControl"
                    [options]="productTypeDropdown.get(i)"
                    name="producttype">
                  </p-dropdown>
                </td>
                
              <td>
              
              <input pInputText
              name="skewtype"
              id="skewtype"
              autocomplete="off"
              type="text"
              class="clsControl"
              formControlName="skewtype"
              readonly
            />
            </td>
                  <td>
                   
                  <input pInputText
                  name="packagetype"
                  id="packagetype"
                  autocomplete="off"
                  type="text"
                  class="clsControl"
                  formControlName="packagetype"
                  readonly
                />
                <input pInputText
                  name="packagetypeid"
                  id="packagetypeid"
                  autocomplete="off"
                  type="hidden"
                  class="clsControl"
                  formControlName="packagetypeid"
                />
                </td>
                <td>
                 
                <input pInputText
                name="packagesize"
                id="packagesize"
                autocomplete="off"
                type="text"
                class="clsControl"
                formControlName="packagesize"
                readonly
              />
              </td>
              <td>
               
                <input pInputText
                  name="orderqt"
                  id="orderqt"
                  type="number"
                  autocomplete="off"
                  class="clsControl"       
                  formControlName="orderqt"
                  placeholder="Enter Quantity "
                  min="1"
                  onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                 >
                 <!-- step="1" -->
              </td>
              <!-- <td>
                <input pInputText
                  name="ordercost"
                  id="ordercost"
                  type="text"
                  autocomplete="off"
                  class="clsControl"       
                  formControlName="ordercost"
                  placeholder="Enter Cost "
                  min="0.1">
              </td> -->
              <td>
                <a (click)="deleteItem(i,$event)" *ngIf="!orderForm.get('items').valid || sysmbol == 0">                                                    
                    <span style="font-size: 1.4rem;" class="fa fa-minus-circle">
                    </span>
                </a> 
               
                  <a (click)="addItem()" >
                      <span class="fa fa-plus-circle" style="font-size: 1.4rem;">
                      </span>
                      <!-- *ngIf="orderForm.get('items').valid" -->
                  </a>
               </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
            <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip *ngIf="OrderFormDetailsArr?.hasError('duplicate')">
              duplicate entries
            </div> 
            <div class="ui-g" style="width:100%;text-align:right;">
              <div class="ui-g-12">
                <button pButton type="submit" label="Save" ></button>
                <button 
                    pButton 
                    (click)="resetForm()" 
                    type="button" 
                    label="{{clearbutton}}" 
                    class="ui-button-secondary">
                </button>
              </div>
            </div>
            
          </div>
        </div>
       
        </form>
      </p-panel>
    </div>
  </div>
</div>
<p-growl [(value)]="msgs" life='5000'></p-growl>


