<div class="page-header">
    <h1 class="pull-left" style="margin:8px 0px;">
        <!--Page Heading-->
        <span>Manager Dashboard</span>
    </h1>
    <!-- Header Close and Collapse -->
    <div class="pull-right" style="padding:0px !important; margin-top:2px !important; margin-bottom:2px;">
      
    </div>
  </div>
  <form
            [formGroup]="managerdashboardForm">
<div class="content-section implementation GridDemo">
        <div  class="ui-g" >
                <div class="ui-g-6 ui-md-6"  style="padding-top:0em;">
                    <div class="paddingRL">
                        <label>Task Type :</label>
                        <p-dropdown
                        [options]="taskTypes"
                        [(ngModel)]="taskTypeModel"
                        placeholder="-- Select --"
                        [autoWidth]="true"
                        (onChange)="taskTypeChange()"
                        class="clsControl" 
                        formControlName="taskTypes"
                        id="taskname"
                        name="taskname">
                      </p-dropdown>
                    </div>
                </div>
             
                <div class="ui-g-6 ui-md-6"  style="padding-top:0em;">
                    <div class="paddingRL">
                        <label>Manager Filter:</label>
                        <p-dropdown
                        [options]="showAllManagerOption"
                        [autoWidth]="true"
                        (onChange)="showAllManagerChange()"
                        class="clsControl"
                        formControlName="ShowallManager"
                        id="value"
                        name="label">
                      </p-dropdown>
                    </div>
                </div>
            </div>
    <div class="ui-g">
        <div >

            <!-- <p-panel header="Quarantine Room" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
                <p-dataTable [value]="tasks">
                    <p-column field="task" header="Task">
                        <ng-template let-col let-task="rowData" pTemplate="body">
                            <a href="#" [routerLink]="['../taskaction', task['taskid']]">{{task[col.field]}}</a>                            
                        </ng-template>
                    </p-column>

                    <p-column field="employee" header="Employee"></p-column>

                </p-dataTable>
            </p-panel> -->
           <!-- Assigned Tasks -->
            <p-panel header="Assigned" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
                <p-table #dt [value]="assignedTasks" 
                class="clsTableSelection"
                    sortMode="single"                      
                    [responsive]="true" 
                    [paginator]="true" 
                    [rows]="10" 
                    sortField="LastActionDate"
                    sortOrder="-1"
                    rowHover='true'
                    [rowsPerPageOptions]="paginationValuesassignedTasks"
                    (onPage)="assignedTasksonPageChange($event)"
                    [globalFilterFields]="['EmpName','TaskTypeName','OrderRefId','StrainName','TotalWorkhrs','TaskStatus','LastActionDate','ManagerName']"
                    id="tblAssigned"
                    name="tblAssigned"
                    >                    
                    <ng-template pTemplate="caption">
                        <div style="text-align: right">
                            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                            <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:80%;">
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th [pSortableColumn]="'EmpName'">{{globalResource.employee}} 
                                    <p-sortIcon [field]="'EmpName'"></p-sortIcon>                                
                                </th>
                                <th class="taskwidth" [pSortableColumn]="'TaskTypeName'">{{globalResource.task}}  
                                    <p-sortIcon [field]="'TaskTypeName'"></p-sortIcon></th>
                                <th [pSortableColumn]="'OrderRefId'">{{globalResource.order}}  <p-sortIcon [field]="'OrderRefId'"></p-sortIcon></th>
                                <th [pSortableColumn]="'StrainName'">{{globalResource.strain}}  <p-sortIcon [field]="'StrainName'"></p-sortIcon></th>
                                <!-- <th [pSortableColumn]="'GrowerLotNo'" class="lotNum">{{globalResource.lot}}#  <p-sortIcon [field]="'GrowerLotNo'"></p-sortIcon></th>  -->
                                <th [pSortableColumn]="'TotalWorkhrs'" class="clsElpTime">{{globalResource.elapsedtimewithformat}}  <p-sortIcon [field]="'TotalWorkhrs'"></p-sortIcon></th>                     
                                <th [pSortableColumn]="'ManagerName'" class="assignby">{{globalResource.assignby}}  <p-sortIcon [field]="'ManagerName'"></p-sortIcon></th>
                                <th class="datewidth" [pSortableColumn]="'LastActionDate'">{{globalResource.lastactiondate}} 
                                    <p-sortIcon [field]="'LastActionDate'"></p-sortIcon>
                                </th>
                        </tr>
                        <tr>
                                <th>
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'EmpName', 'contains')" class="clsControl">
                                    </th>
                                    <th class="taskwidth">
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'TaskTypeName', 'contains')" class="clsControl">
                                    </th>
                                    <th class="orderrefwidth">
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'OrderRefId', 'contains')" class="clsControl">
                                    </th>
                                    <th class="orderrefwidth">
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'StrainName', 'contains')" class="clsControl">
                                    </th>
                                    <!-- <th  class="lotNum">
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'GrowerLotNo', 'contains')" class="clsControl">
                                    </th> -->
                                    <th>
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'TotalWorkhrs', 'contains')" class="clsControl">
                                </th>
                                    <th>
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'ManagerName', 'contains')" class="clsControl">
                                    </th>
                                    <th class="datewidth">
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'LastActionDate', 'contains')" class="clsControl">
                                    </th>
                                    <!-- <th>
                                        <input pInputText type="text" (input)="dt.filter($event.target.value, 'TaskStatus', 'contains')" class="clsControl">
                                    </th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" class="clsTableRow" (click)= "onRowSelect(task)" >
                                <td>
                                        {{task?.EmpName}}
                                    <!-- <u><a href="#" [routerLink]="['../taskaction', task?.TaskTypeKey, task?.TaskId]">{{task?.EmpName}}</a></u> -->
                                </td>
                                <td class="taskwidth">{{task?.TaskTypeName}}</td>
                                <td class="orderrefwidth">{{task?.OrderRefId}}</td>
                                <td class="orderrefwidth">{{task?.StrainName}}
                                    <!-- <div class="clear"></div> -->
                                    <span *ngIf="task?.LotCounts > 1"> 
                                    <a class="btn-link" (click)="showDialog(task?.TaskId,task?.TaskStatus)" [routerLink]="" ><i style="font-size: 16px" class="fa fa-plus-circle" aria-hidden="true"></i></a></span></td>
                                <!-- <td  class="lotNum"><span>{{task?.GrowerLotNo}}</span></td> -->
                                <td class="taskwidth"><span>{{task?.TotalWorkhrs | minutesToTime}}</span></td>
                                <td  class="assignby"><span>{{task?.ManagerName}}</span></td>
                                <td class="datewidth">{{task?.LastActionDate | date: 'MM/dd/yyyy hh:mm a' }}</td>
                                <!-- <td>{{task?.TaskStatus}}</td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="7">
                              {{ globalResource.norecordsfound }}
                            </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="paginatorleft" let-state>
                            <pagination-counts
                              *ngIf="assignedTasks?.length"
                              [inputData]="assignedTasks"
                              [inputEvent]="assignedTasksevent"
                            ></pagination-counts>
                          </ng-template>
                </p-table>
            </p-panel>
            <!--End Assigned Tasks -->

            <!-- InProcess Tasks -->
            <p-panel header="In Process" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
                <p-table #dtInProcess [value]="inProcessTasks" 
                    sortMode="single"                      
                    [responsive]="true" 
                    [paginator]="true" 
                    [rows]="10" 
                    sortField="LastActionDate"
                    sortOrder="-1"
                    rowHover='true'                   
                    [rowsPerPageOptions]="paginationValuesinProcessTasks"
                    (onPage)="inProcessTasksonPageChange($event)"
                    [globalFilterFields]="['EmpName','TaskTypeName','OrderRefId','TotalWorkhrs','ManagerName','StrainName','TaskStatus','LastActionDate']"                    
                    id="tblInProcessed"
                    name="tblInProcessed"
                    >                    
                    <ng-template pTemplate="caption">
                        <div style="text-align: right">
                            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                            <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dtInProcess.filterGlobal($event.target.value, 'contains')" style="width:80%;">
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th [pSortableColumn]="'EmpName'">{{globalResource.employee}} 
                                <p-sortIcon [field]="'EmpName'"></p-sortIcon>                                
                            </th>
                            <th class="taskwidth" [pSortableColumn]="'TaskTypeName'">{{globalResource.task}}  
                                <p-sortIcon [field]="'TaskTypeName'"></p-sortIcon></th>
                            <th [pSortableColumn]="'OrderRefId'">{{globalResource.order}}  <p-sortIcon [field]="'OrderRefId'"></p-sortIcon></th>
                            <th [pSortableColumn]="'StrainName'">{{globalResource.strain}}  <p-sortIcon [field]="'StrainName'"></p-sortIcon></th>
                            <!-- <th [pSortableColumn]="'GrowerLotNo'" class="lotNum">{{globalResource.lot}}#  <p-sortIcon [field]="'GrowerLotNo'"></p-sortIcon></th>  -->
                            <th [pSortableColumn]="'TotalWorkhrs'" class="clsElpTime">{{globalResource.elapsedtimewithformat}}  <p-sortIcon [field]="'TotalWorkhrs'"></p-sortIcon></th>                     
                            <th [pSortableColumn]="'ManagerName'" class="assignby">{{globalResource.assignby}}  <p-sortIcon [field]="'ManagerName'"></p-sortIcon></th>
                            <th class="datewidth" [pSortableColumn]="'LastActionDate'">{{globalResource.lastactiondate}} 
                                <p-sortIcon [field]="'LastActionDate'"></p-sortIcon>
                            </th>
                        </tr>

                        <tr>
                            <th>
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'EmpName', 'contains')" class="clsControl">
                            </th>
                            <th class="taskwidth">
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'TaskTypeName', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'OrderRefId', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'StrainName', 'contains')" class="clsControl">
                            </th>
                            <!-- <th  class="lotNum">
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'GrowerLotNo', 'contains')" class="clsControl">
                            </th> -->
                            <th>
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'TotalWorkhrs', 'contains')" class="clsControl">
                        </th>
                            <th>
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'ManagerName', 'contains')" class="clsControl">
                            </th>
                            <th class="datewidth">
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'LastActionDate', 'contains')" class="clsControl">
                            </th>
                            <!-- <th>
                                <input pInputText type="text" (input)="dtInProcess.filter($event.target.value, 'TaskStatus', 'contains')" class="clsControl">
                            </th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" class="clsTableRow" (click)= "onRowSelect(task)">
                            <td>
                                    {{task?.EmpName}}
                                <!-- <u><a href="#" [routerLink]="['../taskaction', task?.TaskTypeKey, task?.TaskId]">{{task?.EmpName}}</a></u> -->
                            </td>
                            <td class="taskwidth">{{task?.TaskTypeName}}</td>
                            <td class="orderrefwidth">{{task?.OrderRefId}}</td>
                            <td class="orderrefwidth">{{task?.StrainName}}
                                <!-- <div class="clear"></div> -->
                                <span *ngIf="task?.LotCounts > 1"> 
                                <a class="btn-link" (click)="showDialog(task?.TaskId,task?.TaskStatus)" [routerLink]="" ><i style="font-size: 16px" class="fa fa-plus-circle" aria-hidden="true"></i></a></span></td>
                            <!-- <td  class="lotNum"><span>{{task?.GrowerLotNo}}</span></td> -->
                            <td class="taskwidth"><span>{{task?.TotalWorkhrs | minutesToTime}}</span></td>
                            <td  class="assignby"><span>{{task?.ManagerName}}</span></td>
                            <td class="datewidth">{{task?.LastActionDate | date: 'MM/dd/yyyy hh:mm a' }}</td>
                            <!-- <td>{{task?.TaskStatus}}</td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="7">
                              {{ globalResource.norecordsfound }}
                            </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="paginatorleft" let-state>
                        <pagination-counts
                          *ngIf="inProcessTasks?.length"
                          [inputData]="inProcessTasks"
                          [inputEvent]="inProcessTasksevent"
                        ></pagination-counts>
                      </ng-template>
                </p-table>
            </p-panel>
            <!--End InProcess Tasks -->

            <!-- Paused Tasks -->
            <p-panel header="Paused" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
                <p-table #dtPaused [value]="pausedTasks" 
                    sortMode="single"                      
                    [responsive]="true" 
                    [paginator]="true" 
                    [rows]="10" 
                    sortField="LastActionDate"
                    sortOrder="-1"
                    rowHover='true'
                    [rowsPerPageOptions]="paginationValuespausedTasks"
                    (onPage)="pausedTasksonPageChange($event)"
                    [globalFilterFields]="['EmpName','TaskTypeName','OrderRefId','StrainName','TotalWorkhrs','ManagerName','TaskStatus','LastActionDate']"                    
                    id="tblPausedTasks"
                    name="tblPausedTasks"
                    >                    
                    <ng-template pTemplate="caption">
                        <div style="text-align: right">
                            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                            <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dtPaused.filterGlobal($event.target.value, 'contains')" style="width:80%;">
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th [pSortableColumn]="'EmpName'">{{globalResource.employee}} 
                                <p-sortIcon [field]="'EmpName'"></p-sortIcon>                                
                            </th>
                            <th class="taskwidth" [pSortableColumn]="'TaskTypeName'">{{globalResource.task}}  
                                <p-sortIcon [field]="'TaskTypeName'"></p-sortIcon></th>
                            <th [pSortableColumn]="'OrderRefId'">{{globalResource.order}}  <p-sortIcon [field]="'OrderRefId'"></p-sortIcon></th>
                            <th [pSortableColumn]="'StrainName'">{{globalResource.strain}}  <p-sortIcon [field]="'StrainName'"></p-sortIcon></th>
                            <!-- <th [pSortableColumn]="'GrowerLotNo'" class="lotNum">{{globalResource.lot}}#  <p-sortIcon [field]="'GrowerLotNo'"></p-sortIcon></th>                       -->
                            <th [pSortableColumn]="'TotalWorkhrs'" class="clsElpTime">{{globalResource.elapsedtimewithformat}}  <p-sortIcon [field]="'TotalWorkhrs'"></p-sortIcon></th>
                            <th [pSortableColumn]="'ManagerName'" class="assignby">{{globalResource.assignby}}  <p-sortIcon [field]="'ManagerName'"></p-sortIcon></th>
                            <th class="datewidth" [pSortableColumn]="'LastActionDate'">{{globalResource.lastactiondate}} 
                                <p-sortIcon [field]="'LastActionDate'"></p-sortIcon>
                            </th>
                        </tr>

                        <tr>
                            <th>
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'EmpName', 'contains')" class="clsControl">
                            </th>
                            <th class="taskwidth">
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'TaskTypeName', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'OrderRefId', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'StrainName', 'contains')" class="clsControl">
                            </th>
                            <!-- <th  class="lotNum">
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'GrowerLotNo', 'contains')" class="clsControl">
                            </th> -->
                            <th>
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'TotalWorkhrs', 'contains')" class="clsControl">
                        </th>
                            <th>
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'ManagerName', 'contains')" class="clsControl">
                            </th>
                            <th class="datewidth">
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'LastActionDate', 'contains')" class="clsControl">
                            </th>
                            <!-- <th>
                                <input pInputText type="text" (input)="dtPaused.filter($event.target.value, 'TaskStatus', 'contains')" class="clsControl">
                            </th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" class="clsTableRow" (click)= "onRowSelect(task)">
                            <td>
                                    {{task?.EmpName}}
                                <!-- <u><a href="#" [routerLink]="['../taskaction', task?.TaskTypeKey, task?.TaskId]">{{task?.EmpName}}</a></u> -->
                            </td>
                            <td class="taskwidth">{{task?.TaskTypeName}}</td>
                            <td class="orderrefwidth">{{task?.OrderRefId}}</td>
                            <td class="orderrefwidth">{{task?.StrainName}}
                                    <!-- <div class="clear"></div> -->
                                     <span *ngIf="task?.LotCounts > 1"> 
                                <a class="btn-link" (click)="showDialog(task?.TaskId,task?.TaskStatus)" [routerLink]="" ><i style="font-size: 16px" class="fa fa-plus-circle" aria-hidden="true"></i></a></span></td>
                            <!-- <td  class="lotNum"><span>{{task?.GrowerLotNo}}</span></td> -->
                            <td class="taskwidth"><span>{{task?.TotalWorkhrs | minutesToTime}}</span></td>
                            <td class="assignby" ><span>{{task?.ManagerName}}</span></td>
                            <td class="datewidth">{{task?.LastActionDate | date: 'MM/dd/yyyy hh:mm a' }}</td>
                            <!-- <td>{{task?.TaskStatus}}</td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="7">
                              {{ globalResource.norecordsfound }}
                            </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="paginatorleft" let-state>
                        <pagination-counts
                          *ngIf="pausedTasks?.length"
                          [inputData]="pausedTasks"
                          [inputEvent]="pausedTasksevent"
                        ></pagination-counts>
                      </ng-template>
                </p-table>
            </p-panel>
            <!--End Paused Tasks -->

            <!-- Review Pending -->
            <p-panel header="Review Pending" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
                    <p-table #dtReviewPending [value]="reviewPendingTasks" 
                        sortMode="single"                       
                        [responsive]="true" 
                        [paginator]="true" 
                        [rows]="10" 
                        sortField="LastActionDate"
                        sortOrder="-1"
                        rowHover='true'
                        [rowsPerPageOptions]="paginationValuesreviewPendingTasks"
                        (onPage)="reviewPendingTasksonPageChange($event)"
                        [globalFilterFields]="['EmpName','TaskTypeName','OrderRefId','StrainName','ManagerName','TotalWorkhrs','TaskStatus','LastActionDate']"                        
                        id="tblRevPendingTasks"
                        name="tblRevPendingTasks"
                        >                        
    
                        <ng-template pTemplate="caption">
                            <div style="text-align: right">
                                <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                                <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dtReviewPending.filterGlobal($event.target.value, 'contains')" style="width:80%;">
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header">
                            <tr>
                                <th [pSortableColumn]="'EmpName'">{{globalResource.employee}} 
                                    <p-sortIcon [field]="'EmpName'"></p-sortIcon>                                
                                </th>
                                <th class="taskwidth" [pSortableColumn]="'TaskTypeName'">{{globalResource.task}}  
                                    <p-sortIcon [field]="'TaskTypeName'"></p-sortIcon></th>
                                <th [pSortableColumn]="'GrowerName'">{{globalResource.order}} <p-sortIcon [field]="'OrderRefId'"></p-sortIcon></th>
                                <th [pSortableColumn]="'StrainName'">{{globalResource.strain}}  <p-sortIcon [field]="'StrainName'"></p-sortIcon></th>
                                <!-- <th [pSortableColumn]="'GrowerLotNo'" class="lotNum">{{globalResource.lot}}#  <p-sortIcon [field]="'GrowerLotNo'"></p-sortIcon></th>                       -->
                                <th [pSortableColumn]="'TotalWorkhrs'" class="clsElpTime">{{globalResource.elapsedtimewithformat}}  <p-sortIcon [field]="'TotalWorkhrs'"></p-sortIcon></th>
                                <th [pSortableColumn]="'ManagerName'" class="assignby">{{globalResource.assignby}}  <p-sortIcon [field]="'ManagerName'"></p-sortIcon></th>
                                <th class="datewidth" [pSortableColumn]="'LastActionDate'">{{globalResource.lastactiondate}} 
                                    <p-sortIcon [field]="'LastActionDate'"></p-sortIcon>
                                </th>                                                  
                            </tr>
    
                            <tr>
                                <th>
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'EmpName', 'contains')" class="clsControl">
                                </th>
                                <th class="taskwidth">
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'TaskTypeName', 'contains')" class="clsControl">
                                </th>
                                <th class="orderrefwidth">
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'OrderRefId', 'contains')" class="clsControl">
                                </th>
                                <th class="orderrefwidth">
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'StrainName', 'contains')" class="clsControl">
                                </th>
                                <!-- <th class="lotNum">
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'GrowerLotNo', 'contains')" class="clsControl">
                                </th> -->
                                <th>
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'TotalWorkhrs', 'contains')" class="clsControl">
                            </th>
                                <th>
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'ManagerName', 'contains')" class="clsControl">
                                </th>
                                <th class="datewidth">
                                    <input pInputText type="text" (input)="dtReviewPending.filter($event.target.value, 'LastActionDate', 'contains')" class="clsControl">
                                </th>                            
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                            <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" class="clsTableRow" (click)= "onRowSelect(task)">
                                <td>
                                        {{task?.EmpName}}
                                    <!-- <u><a href="#" [routerLink]="['../taskaction', task?.TaskTypeKey, task?.TaskId]">{{task?.EmpName}}</a></u> -->
                                </td>
                                <td class="taskwidth">{{task?.TaskTypeName}}</td>
                                <td class="orderrefwidth">{{task?.OrderRefId}}</td>
                                <td class="orderrefwidth">{{task?.StrainName}}
                                        <!-- <div class="clear"></div> -->
                                         <span *ngIf="task?.LotCounts > 1"> 
                                    <a class="btn-link" (click)="showDialog(task?.TaskId,task?.TaskStatus)" [routerLink]="" ><i style="font-size: 16px" class="fa fa-plus-circle" aria-hidden="true"></i></a></span></td>
                                <!-- <td  class="lotNum"><span>{{task?.GrowerLotNo}}</span></td>   -->
                                <td class="taskwidth"><span>{{task?.TotalWorkhrs | minutesToTime}}</span></td>
                                <td class="assignby" ><span>{{task?.ManagerName}}</span></td>
                                <td class="datewidth">{{task?.LastActionDate | date: 'MM/dd/yyyy hh:mm a' }}</td>                             
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage" let-columns>
                            <tr>
                                <td [attr.colspan]="7">
                                  {{ globalResource.norecordsfound }}
                                </td>
                            </tr>
                          </ng-template>
                          <ng-template pTemplate="paginatorleft" let-state>
                            <pagination-counts
                              *ngIf="reviewPendingTasks?.length"
                              [inputData]="reviewPendingTasks"
                              [inputEvent]="reviewPendingTasksevent"
                            ></pagination-counts>
                          </ng-template>
                    </p-table>
                </p-panel>
            <!-- End Review Pending  -->

              <!-- Completed Tasks -->
              <p-panel [toggleable]="true"  [style]="{'margin-bottom':'20px','width': '100%'}" >
                    <p-header class="accordionHeader">  
                    <div class="ui-helper-clearfix"  >
                            
                         
                                <div  class="panel-titleCompletion">
                                    <div style="float: left;">
                                    <span class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">
                                    Completed
                                    </span> &nbsp;&nbsp;&nbsp;
                                </div>
                                <div style="float: left; ">
                                    <p-dropdown  
                                    [options]="showAllManagerOption"
                                    [autoWidth]="true"
                                    [(ngModel)]="showAllManagerForCompleteModel"
                                    (onChange)="showAllManagerCompleteTskChange()"
                                    class="clsControl reviewedQty"
                                    formControlName="ShowallManagerForTskComplete"
                                    id="value" 
                                    height = "25px"
                                    name="label">
                                </p-dropdown>
                            </div>
                            </div>
                             
                    </div>
                    </p-header>
              
                <p-table #dtCompleted [value]="completedTasks" 
                    sortMode="single"                      
                    [responsive]="true" 
                    [paginator]="true"                     
                    [rows]="10" 
                    sortField="LastActionDate"
                    sortOrder="-1"
                    rowHover='true'
                    [rowsPerPageOptions]="paginationValuescompletedTasks"
                    (onPage)="completedTasksonPageChange($event)"
                    [globalFilterFields]="['EmpName','TaskTypeName','ManagerName','TotalWorkhrs','OrderRefId','StrainName','TaskStatus','LastActionDate','ManagerName']"                    
                    id="tblCompletedTasks"
                    name="tblCompletedTasks"
                    >                    
                    <ng-template pTemplate="caption">
                        <div style="text-align: right">
                            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                            <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dtCompleted.filterGlobal($event.target.value, 'contains')" style="width:80%;">

                            <!-- <button pButton type="button" (click)="resetTable(dtCompleted)" label="Reset"></button> -->
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th [pSortableColumn]="'EmpName'">{{globalResource.employee}} 
                                <p-sortIcon [field]="'EmpName'"></p-sortIcon>                                
                            </th>
                            <th class="taskwidth" [pSortableColumn]="'TaskTypeName'">{{globalResource.task}}  
                                <p-sortIcon [field]="'TaskTypeName'"></p-sortIcon></th>
                            <th [pSortableColumn]="'OrderRefId'">{{globalResource.order}} <p-sortIcon [field]="'OrderRefId'"></p-sortIcon></th>
                            <th [pSortableColumn]="'StrainName'">{{globalResource.strain}}  <p-sortIcon [field]="'StrainName'"></p-sortIcon></th>
                            <!-- <th [pSortableColumn]="'GrowerLotNo'" class="lotNum">{{globalResource.lot}}#  <p-sortIcon [field]="'GrowerLotNo'"></p-sortIcon></th>                       -->
                            <th [pSortableColumn]="'TotalWorkhrs'" class="clsElpTime">{{globalResource.elapsedtimewithformat}}  <p-sortIcon [field]="'TotalWorkhrs'"></p-sortIcon></th>
                            <th [pSortableColumn]="'ManagerName'" class="assignby">{{globalResource.assignby}}  <p-sortIcon [field]="'ManagerName'"></p-sortIcon></th>
                            <th class="datewidth" [pSortableColumn]="'LastActionDate'">{{globalResource.lastactiondate}} 
                                <p-sortIcon [field]="'LastActionDate'"></p-sortIcon>
                            </th>
                            <!-- <th [pSortableColumn]="'TaskStatus'">Status <p-sortIcon [field]="'TaskStatus'"></p-sortIcon></th> -->
                        </tr>

                        <tr>
                            <th>
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'EmpName', 'contains')" class="clsControl">
                            </th>
                            <th class="taskwidth">
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'TaskTypeName', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'OrderRefId', 'contains')" class="clsControl">
                            </th>
                            <th class="orderrefwidth">
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'StrainName', 'contains')" class="clsControl">
                            </th >
                            <!-- <th  class="lotNum">
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'GrowerLotNo', 'contains')" class="clsControl">
                            </th> -->
                            <th>
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'TotalWorkhrs', 'contains')" class="clsControl">
                        </th>
                            <th>
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'ManagerName', 'contains')" class="clsControl">
                            </th>
                            <th class="datewidth">
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'LastActionDate', 'contains')" class="clsControl">
                            </th>
                            <!-- <th>
                                <input pInputText type="text" (input)="dtCompleted.filter($event.target.value, 'TaskStatus', 'contains')" class="clsControl">
                            </th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" class="clsTableRow" (click)= "onRowSelect(task)">
                            <td>
                                    {{task?.EmpName}}
                                <!-- <u><a href="#" [routerLink]="['../taskaction', task?.TaskTypeKey, task?.TaskId]">{{task?.EmpName}}</a></u> -->
                            </td>
                            <td class="taskwidth">{{task?.TaskTypeName}}</td>
                            <td class="orderrefwidth">{{task?.OrderRefId}}</td>
                            <td class="orderrefwidth">{{task?.StrainName}}
                                    <!-- <div class="clear"></div> -->
                                     <span *ngIf="task?.LotCounts > 1"> 
                                <a class="btn-link" (click)="showDialog(task?.TaskId,task?.TaskStatus)" [routerLink]="" ><i style="font-size: 16px" class="fa fa-plus-circle" aria-hidden="true"></i></a></span>
                            </td>
                            <!-- <td  class="lotNum"><span>{{task?.GrowerLotNo}}</span></td> -->
                            <td class="taskwidth"><span>{{task?.TotalWorkhrs | minutesToTime}}</span></td>
                            <td class="assignby" ><span>{{task?.ManagerName}}</span></td>
                            <td class="datewidth">{{task?.LastActionDate | date: 'MM/dd/yyyy hh:mm a' }}</td>
                            <!-- <td class="textWrapp">{{task?.TaskStatus}}</td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="7">
                              {{ globalResource.norecordsfound }}
                            </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="paginatorleft" let-state>
                        <pagination-counts
                          *ngIf="completedTasks?.length"
                          [inputData]="completedTasks"
                          [inputEvent]="completedTasksevent"
                        ></pagination-counts>
                      </ng-template>
                </p-table>
            </p-panel>
            <!--End Completed Tasks -->

            <!-- <p-panel header="Skewing Room" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
                <p-dataTable [value]="tasks">
                    <p-column field="task" header="Task">
                        <ng-template let-col let-task="rowData" pTemplate="body">
                            <a href="#" [routerLink]="['../taskaction', task['taskid']]">{{task[col.field]}}</a>
                        </ng-template>
                    </p-column>

                    <p-column field="employee" header="Employee"></p-column>

                </p-dataTable>
            </p-panel>

            <p-panel header="A Bud Processing" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
                <p-dataTable [value]="tasks">
                    <p-column field="task" header="Task">
                        <ng-template let-col let-task="rowData" pTemplate="body">
                            <a href="#" [routerLink]="['../taskaction', task['taskid']]">{{task[col.field]}}</a>
                        </ng-template>
                    </p-column>

                    <p-column field="employee" header="Employee"></p-column>

                </p-dataTable>
            </p-panel>

            <p-panel header="B Joints Processing" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
                <p-dataTable [value]="tasks">
                    <p-column field="task" header="Task">
                        <ng-template let-col let-task="rowData" pTemplate="body">
                            <a href="#" [routerLink]="['../taskaction', task['taskid']]">{{task[col.field]}}</a>
                        </ng-template>
                    </p-column>

                    <p-column field="employee" header="Employee"></p-column>

                </p-dataTable>
            </p-panel>

            <p-panel header="C Oil Processing" [toggleable]="true" [style]="{'margin-bottom':'20px'}">
                <p-dataTable [value]="tasks">
                    <p-column field="task" header="Task">
                        <ng-template let-col let-task="rowData" pTemplate="body">
                            <a href="#" [routerLink]="['../taskaction', task['taskid']]">{{task[col.field]}}</a>
                        </ng-template>
                    </p-column>

                    <p-column field="employee" header="Employee"></p-column>

                </p-dataTable>
            </p-panel> -->
            <!-- [routerLink]="['/taskaction', task['taskid']]" -->
        </div>
    </div>
</div>

<p-dialog  header="Details" [(visible)]="display"  [responsive]="true"   [resizable]="false" [width]="400" 
 appendTo="body">
     
            
    <div>
            <p-table [value]="tasklotDetailsBytaskId">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width:50%">{{ globalResource.strain }} </th>
                        <th  style="width:50%">{{ globalResource.lot }}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-task let-rowData let-columns="columns" let-rowIndex="rowIndex">
                    <tr >
                        <td>{{task?.StrainName}}</td>
                        <td>
                            {{task?.GrowerLotNo}}
                            <!-- Added by Devdan :: 21-Nov-2018 :: Adding Lot Note and Lot Details Icon -->
                            <app-lot-comment
                            [LotId]="task?.LotId"
                            [LotCommentsCount]="task?.LotNoteCount"
                            (CommentIconClicked)="commentIconClicked($event)"
                        ></app-lot-comment>
                        
                        <app-lot-note-icon
                            [LotId]="task?.LotId"                                
                            (NoteIconClicked)="ShowLotNote($event)"
                        ></app-lot-note-icon>
                        </td>
                        </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="7">
                          {{ globalResource.norecordsfound }}
                        </td>
                    </tr>
                  </ng-template>
            </p-table>
    </div>
</p-dialog>
<app-lot-note [Lot]="lotInfo" *ngIf="lotInfo?.lotId" ></app-lot-note> 
<app-popup-lot-comment [Lot]="lotInfo" *ngIf="lotInfo?.showLotCommentModal" (CommentSaved)="OnCommentSaved($event)">
</app-popup-lot-comment>
</form>

