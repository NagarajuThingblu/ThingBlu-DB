<div class="content-section implementation GridDemo orderRequest">
  <div class="ui-g">
    <div class="ui-g-12">
      <p-panel header="{{pageHeader}}" [toggleable]="true" >
        <p-header>
         
        </p-header>
        <form [formGroup]="employeeSkillForm"  (ngSubmit)="onSubmit(employeeSkillForm)" >
          <div class="ui-g">
            <div class="ui-g-12 ui-md-12" style="padding: 0">
                 <a [routerLink]="" class="btn-link" (click)="backToEmpPage()" style="float: right;padding-right: 21px;text-decoration: underline" ><< Back</a>
            </div>
          </div>

          <div class="ui-g">
             <!-- TaskCategory Name -->
             <div class="ui-g-12 ui-md-6">
              <div class="paddingRL">
                <div class="le-su-12">
                  <label for="taskcategory">
                    <b>Task Category</b><span class="star">*</span>:
                  </label>
                  <p-dropdown
                  [filter] ="true"
                  id="taskcategory"
                  [options]="taskcategories"
                  formControlName="taskcategory"
                  placeholder="-- Select --"
                  (onChange)="oncategoryChange($event)"
                  [autoWidth]="false"
                  class="clsControl"
                  name="taskcategory">
                </p-dropdown>
                <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                *ngIf="!employeeSkillForm.controls['taskcategory'].valid && employeeSkillForm.controls['taskcategory'].dirty">
                <span *ngIf="employeeSkillForm.controls['taskcategory'].errors['required']">
                 Task Category required
                </span>
               </div> 
                </div>
              </div>
             </div>
              <!-- TaskType Name -->
            <div class="ui-g-12 ui-md-6">
              <div class="paddingRL">
                <div class="le-su-12">
                  <label for="tasktype">
                    <b>Task Type</b><span class="star">*</span>:
                  </label>
                  <p-dropdown
                  [filter] ="true"
                  id="tasktype"
                  [options]="tasknames"
                  formControlName="tasktype"
                  placeholder="-- Select --"
                  [autoWidth]="false"
                  class="clsControl"
                  name="tasktype">
                </p-dropdown>
                </div>
              </div>
             </div>
             <!-- Skills -->
          <div class="ui-g-12 ui-md-6">
            <div class="paddingRL">
              <div class="le-su-12">
                <label for="skills">
                  <b>Skills</b><span class="star">*</span>:
                </label>

                <div>
                  <input pInputText
                  name="skills"
                  id="skills"
                  autocomplete="off"
                  type="text"
                  placeholder="Enter Skills Name"
                  formControlName="skills"
                  style="width:91%;" #myskill
                />&nbsp;
                <button class="btn btn-primary add" type="button"  [ngStyle]= "SkillUpdateId!=0? {'display':'none'}: {'display':''}"  (click)="addSkillslist(myskill)"><i class="fa fa-plus"></i></button>
                </div>
               
              </div>
            </div>
           </div>

           <div class="ui-g-12 ui-md-6">
            <div class="PaddingRL" *ngIf="SkillUpdateId!=0? false: true">
              <div class="le-se-12">
                <label for="skilsslist">Skills List</label>
                <div  class="SkillListBox">
                  <ul class="skils-list" style='padding: 0px;'>
                    <li  *ngFor="let i of Skillsarray; let id=index" class="skilsslistitems" >
                      <span class="badge badge-pill badge-light skilsslisttext">{{i}}&nbsp;<i class="fa fa-times" (click)="removeitem(id)"></i></span>
                      
                    </li>
                  </ul>
                </div>   
                  
                
              
             
              </div>
            </div>
          </div>

           <!--IsActive-->
           <div class="ui-g-12 ui-md-6" style="padding-top: 0px;">
            <div class="paddingRL">
              <label></label>
              <div class="clear"></div>
              <p-checkbox value="true" [(ngModel)]="chkIsActive" label="{{globalResource.IsActiveFlag}}"
                formControlName="chkIsActive" binary="true"></p-checkbox>
            </div>
          </div>
          <!--End IsActive-->

          <div class="ui-g-12 ui-md-12" style="text-align: right;">
            <div class="paddingRL">
            <p-button type="submit" label="{{ saveButtontext}}" id="btnRoomTypeSave" name="btnRoomTypeSave">
            </p-button>

            <button pButton (click)="resetAll()" type="button" label="{{clear}}" class="ui-button-secondary">
            </button>
          </div>
</div>
          </div>
      
       
        </form>
      </p-panel>
    </div>
  </div>

  
  <div class="ui-g">
    <div class="ui-g-12">
      <p-panel header="Skills List" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
<p-table #dtSkillList [value]="allSkillslist"
   sortMode="single" [responsive]="true" [paginator]="true" [rows]="10"           
   sortField="skillId"
   sortOrder="-1"
   [rowsPerPageOptions]="paginationValues"
   (onPage)="onPageChange($event)"
   [globalFilterFields]="['TaskCategory','TaskName','SkillName','Description' ]">

   <ng-template pTemplate="caption">
    <div style="text-align: right;">
      <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
      <input type="text" autocomplete="off" pInputText size="50" placeholder="Global Filter" (input)="allSkillslist.filterGlobal($event.target.value,'contains')"
      style="width: auto;">
    </div>
  </ng-template>
  <ng-template pTemplate="header" >
    <tr>
      <th [pSortableColumn]="'TaskCategory'">Task Category  <p-sortIcon [field]="'TaskCategory'"></p-sortIcon></th>
      <th [pSortableColumn]="'TaskName'"> Task Name <p-sortIcon [field]="'TaskName'"></p-sortIcon></th>
      <th [pSortableColumn]="'SkillName'">Skill Name<p-sortIcon [field]="'SkillName'"  ></p-sortIcon>  </th>           
                  <th style="width:100px;"> </th>
    </tr>
    <tr>
      <th>
          <input pInputText type="text" autocomplete="off" (input)="dtSkillList.filter($event.target.value, 'TaskCategory', 'contains')" class="clsControl">
      </th>
      <th>
          <input pInputText type="text" autocomplete="off" (input)="dtSkillList.filter($event.target.value, 'TaskName', 'contains')" class="clsControl">
      </th>
      <th>
        <input pInputText type="text" autocomplete="off" (input)="dtSkillList.filter($event.target.value,'SkillName','contains')" class="clsControl">
      </th>
    <th rowspan="2"></th>
                            
    </tr>
      </ng-template>

      <ng-template pTemplate="body" let-skillset let-rowData let-columns="columns" let-rowIndex="rowIndex">
        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
           <td>{{skillset?.CategoryName}}</td>
             <td>{{skillset?.TaskTypeName}}</td>
             <td>{{skillset?.SkillName}}</td>
            <td style="width:65px;"> 
               <span class="ui-column-title">edit</span>
              <a href="#" [routerLink]="" (click)="GetSkillonEdit(skillset?.SkillID)" >                             
                  <span class="fa fa-edit"></span>
              </a>
              <a href="#" [routerLink]="" (click)="showConformationMessaegForDelete(skillset?.SkillID,skillset,1,0)" >
                <span class="fa fa-trash"></span>
              </a>
            <div class="clsToggleButtonDiv">
                  <p-toggleButton 
                    [(ngModel)]="skillset.IsActive" 
                    onLabel="Active" offLabel="InActive"  
                    [style]="{'width':'90px'}"
                    (onChange)="showConformationMessaegForDeactive(SkillID?.SkillID,SkillID, rowIndex,0,1)"
                    >
                   </p-toggleButton>
            </div>
        </td>  
        </tr>
    </ng-template>
    <ng-template pTemplate="paginatorleft" let-state>
      <pagination-counts
        *ngIf="allSkillslist?.length"
        [inputData]="allSkillslist"
        [inputEvent]="event"
      ></pagination-counts>
    </ng-template>
</p-table>
      </p-panel>
    </div>
  </div>
</div>
<p-growl [(value)]="msg" life='5000'></p-growl>
<p-confirmDialog 
  header="Confirmation" 
  icon="fa fa-question-circle" 
  width="425" 
  *ngIf="true"
  class="clsConfirmBox" >
</p-confirmDialog>
