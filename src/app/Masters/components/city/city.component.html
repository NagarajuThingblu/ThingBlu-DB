<div class="content-section implementation GridDemo orderRequest">
  <div class="ui-g">

    <div class="ui-g-12">
          <!-- New City -->
          <p-panel header="{{ cityResources.pageheading }}" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
            <form
              [formGroup]="cityForm"
              (ngSubmit)="onSubmit(cityForm.value)">
               <div class="ui-g">
       <!--country -->
       <div class="ui-g-12 ui-md-4">
        <div class="paddingRL">
            <div class="le-su-12">
                <label for="country" class="towlable">{{ globalResource.country}}<span class="star">*</span></label>:
  
                <p-dropdown
                [filter] ="true"
                id="country"
                formControlName="country"
                [options]="countries"
                (onChange)="countryChange()"
                placeholder="-- Select --"
                autocomplete="off"
                [autoWidth]="false"
                class="clsControl"
                name="country">
                </p-dropdown>
                
                <div class="ui-message ui-messages-error ui-corner-all"   appErrorTooltip
                *ngIf="!cityForm.controls['country'].valid&&cityForm.controls['country'].dirty">
                {{ globalResource.countryrequired }}
                </div>
                <p-button class="links" type="button" icon="fa fa-plus" label="Add New" id="btn_countryshow" (click)="showCountryPopup()" name="btnshow" ></p-button>
                       
              </div>
            </div>
         </div>
        
        <!--End country -->
          <!--state -->
      <div class="ui-g-12 ui-md-4">
        <div class="paddingRL">
            <div class="le-su-12">
                <label for="state" class="towlable">{{ globalResource.state}}/Province<span class="star">*</span></label>:
  
                <p-dropdown
                [filter] ="true"
                id="state"
                formControlName="state"
                autocomplete="off"
                [options]="states"
                placeholder="-- Select --"
                [autoWidth]="false"
                class="clsControl"
                name="state">
                </p-dropdown>
  
                <div class="ui-message ui-messages-error ui-corner-all"  appErrorTooltip
                *ngIf="!cityForm.controls['state'].valid&&cityForm.controls['state'].dirty">
                {{ globalResource.staterequired }}
                </div>
                <p-button class="links" type="button" icon="fa fa-plus" label="Add New" id="btn_stateshow" (click)="showStatePopup()" name="btnshow" ></p-button>
              </div>
            </div>
         </div>
        
          <!--End state -->
            <!--city -->
      <div class="ui-g-12 ui-md-4">
        <div class="paddingRL">
            <div class="le-su-12">
                <label for="city" class="towlable">{{ globalResource.city}}<span class="star">*</span></label>:
  
                    <input pInputText
                      name="city"
                      autocomplete="off"
                      id="city"
                      type="text"
                      class="clsControl"
                      formControlName="city"
                    />
  
               
  
                <div class="ui-message ui-messages-error ui-corner-all" appErrorTooltip
                *ngIf="!cityForm.controls['city'].valid&&cityForm.controls['city'].dirty">
                {{ globalResource.cityrequired }}
                </div>
  
              </div>
            </div>
         </div>
        
        <!--End city --> 
  
        <div class="ui-g-12 ui-md-12" style="text-align:right;">
          <div class="paddingRL">
            <p-button  type="submit" label="Save" id="btnCitySave" name="btnCitySave" ></p-button>
            <button pButton (click)="resetForm()" type="button" label="Clear" class="ui-button-secondary"></button>
        </div>
      </div>
  
               </div>
            </form>
            <p-panel header="City, State/Province, Country List" [toggleable]="true" [style]="{'margin-bottom':'20px'}" >
              <p-table #dtCityList [value]="allCityList" 
              sortMode="single"                      
              [responsive]="true" 
              [paginator]="true" 
              [rows]="10"          
              sortOrder="-1"
              [globalFilterFields]="['CountryName','StateName','CityName']"
              >                    
              <ng-template pTemplate="caption">
                  <div style="text-align: right">
                      <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                      <input type="text" autocomplete="off" pInputText size="50" placeholder="Global Filter" (input)="dtCityList.filterGlobal($event.target.value, 'contains')" style="width:auto;">
                  </div>
              </ng-template>
              <ng-template pTemplate="header">
                  <tr> 
                      <th [pSortableColumn]="'CountryName'">Country <p-sortIcon [field]="'CountryName'"></p-sortIcon></th>                  
                      <th [pSortableColumn]="'StateName'">State/Province<p-sortIcon [field]="'StateName'"></p-sortIcon></th>              
                      <th [pSortableColumn]="'CityName'">City <p-sortIcon [field]="'CityName'"></p-sortIcon></th>              
                       
                  </tr>
        
                  <tr>
                      <th>
                          <input pInputText type="text" autocomplete="off" (input)="dtCityList.filter($event.target.value, 'CountryName', 'contains')" class="clsControl">
                      </th>
                      <th>
                          <input pInputText type="text" autocomplete="off" (input)="dtCityList.filter($event.target.value, 'StateName', 'contains')" class="clsControl">
                      </th>
                      <th>
                        <input pInputText type="text" autocomplete="off" (input)="dtCityList.filter($event.target.value, 'CityName', 'contains')" class="clsControl">
                      </th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-city let-rowData let-columns="columns" let-rowIndex="rowIndex">
                  <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                      <!-- <td>
                          <u><a href="#" [routerLink]="['../taskaction', order?.TaskTypeName, order?.TaskId]">{{order?.EmpName}}</a></u>
                      </td> -->  
                      <td><span class="ui-column-title">Country</span>{{city?.CountryName }}  </td>                  
                      <td><span class="ui-column-title">State/Province</span>{{city?.StateName }}  </td>
                      <td><span class="ui-column-title">City</span>{{city?.CityName }}</td>
                  </tr>
              </ng-template>
          </p-table>
             </p-panel>
          </p-panel>
       
    </div>
  </div>
  <p-growl [(value)]="msgs" life='5000'></p-growl>
  <app-add-new-country [Country]="CountryInfo" (CountrySaved)="OnCountrySave($event)"></app-add-new-country>
  <app-add-new-state [State]="StateInfo" (StateSaved)="OnStateSave($event)"></app-add-new-state>
</div>

 
